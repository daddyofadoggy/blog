<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dipankar R. Baisya">
<meta name="dcterms.date" content="2025-12-09">
<meta name="description" content="A step-by-step guide to building a production-grade multi-agent AI system for financial analysis using Google Agent Development Kit and Gemini 2.5 Pro">

<title>Building RiskNavigator AI: A Multi-Agent System for Financial Risk Assessment – My Blogs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Blogs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Building RiskNavigator AI: A Multi-Agent System for Financial Risk Assessment</h1>
                  <div>
        <div class="description">
          A step-by-step guide to building a production-grade multi-agent AI system for financial analysis using Google Agent Development Kit and Gemini 2.5 Pro
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">AI</div>
                <div class="quarto-category">Multi-Agent Systems</div>
                <div class="quarto-category">LLM</div>
                <div class="quarto-category">Agentic AI</div>
                <div class="quarto-category">Financial AI</div>
                <div class="quarto-category">Google ADK</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Dipankar R. Baisya </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 9, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#what-is-an-ai-agent" id="toc-what-is-an-ai-agent" class="nav-link" data-scroll-target="#what-is-an-ai-agent">What is an AI Agent?</a>
  <ul class="collapse">
  <li><a href="#the-simple-explanation" id="toc-the-simple-explanation" class="nav-link" data-scroll-target="#the-simple-explanation">The Simple Explanation</a></li>
  <li><a href="#agent-vs.-traditional-llm" id="toc-agent-vs.-traditional-llm" class="nav-link" data-scroll-target="#agent-vs.-traditional-llm">Agent vs.&nbsp;Traditional LLM</a></li>
  <li><a href="#what-is-a-multi-agent-system" id="toc-what-is-a-multi-agent-system" class="nav-link" data-scroll-target="#what-is-a-multi-agent-system">What is a Multi-Agent System?</a>
  <ul class="collapse">
  <li><a href="#definition" id="toc-definition" class="nav-link" data-scroll-target="#definition">Definition</a></li>
  <li><a href="#the-problem-multi-agent-systems-solve" id="toc-the-problem-multi-agent-systems-solve" class="nav-link" data-scroll-target="#the-problem-multi-agent-systems-solve">The Problem Multi-Agent Systems Solve</a></li>
  <li><a href="#multi-agent-systems-in-practice" id="toc-multi-agent-systems-in-practice" class="nav-link" data-scroll-target="#multi-agent-systems-in-practice">Multi-Agent Systems in Practice</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#motivation-why-i-built-this" id="toc-motivation-why-i-built-this" class="nav-link" data-scroll-target="#motivation-why-i-built-this">Motivation: Why I Built This</a>
  <ul class="collapse">
  <li><a href="#the-personal-problem" id="toc-the-personal-problem" class="nav-link" data-scroll-target="#the-personal-problem">The Personal Problem</a></li>
  <li><a href="#the-bigger-picture" id="toc-the-bigger-picture" class="nav-link" data-scroll-target="#the-bigger-picture">The Bigger Picture</a></li>
  <li><a href="#why-this-project-matters" id="toc-why-this-project-matters" class="nav-link" data-scroll-target="#why-this-project-matters">Why This Project Matters</a></li>
  </ul></li>
  <li><a href="#problem-statement" id="toc-problem-statement" class="nav-link" data-scroll-target="#problem-statement">Problem Statement</a>
  <ul class="collapse">
  <li><a href="#the-challenge" id="toc-the-challenge" class="nav-link" data-scroll-target="#the-challenge">The Challenge</a></li>
  </ul></li>
  <li><a href="#solution-why-multi-agent-architecture" id="toc-solution-why-multi-agent-architecture" class="nav-link" data-scroll-target="#solution-why-multi-agent-architecture">Solution: Why Multi-Agent Architecture?</a>
  <ul class="collapse">
  <li><a href="#why-not-a-single-large-model" id="toc-why-not-a-single-large-model" class="nav-link" data-scroll-target="#why-not-a-single-large-model">Why Not a Single Large Model?</a></li>
  <li><a href="#why-multi-agent-is-superior" id="toc-why-multi-agent-is-superior" class="nav-link" data-scroll-target="#why-multi-agent-is-superior">Why Multi-Agent is Superior</a>
  <ul class="collapse">
  <li><a href="#specialization-through-division-of-labor" id="toc-specialization-through-division-of-labor" class="nav-link" data-scroll-target="#specialization-through-division-of-labor">1. Specialization Through Division of Labor</a></li>
  <li><a href="#sequential-reasoning" id="toc-sequential-reasoning" class="nav-link" data-scroll-target="#sequential-reasoning">2. Sequential Reasoning</a></li>
  <li><a href="#reduced-hallucinations" id="toc-reduced-hallucinations" class="nav-link" data-scroll-target="#reduced-hallucinations">3. Reduced Hallucinations</a></li>
  <li><a href="#better-reliability-through-cross-validation" id="toc-better-reliability-through-cross-validation" class="nav-link" data-scroll-target="#better-reliability-through-cross-validation">4. Better Reliability Through Cross-Validation</a></li>
  <li><a href="#easier-debugging-and-maintenance" id="toc-easier-debugging-and-maintenance" class="nav-link" data-scroll-target="#easier-debugging-and-maintenance">5. Easier Debugging and Maintenance</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#understanding-agent-design-patterns" id="toc-understanding-agent-design-patterns" class="nav-link" data-scroll-target="#understanding-agent-design-patterns">Understanding Agent Design Patterns</a>
  <ul class="collapse">
  <li><a href="#overview-of-all-agent-design-patterns" id="toc-overview-of-all-agent-design-patterns" class="nav-link" data-scroll-target="#overview-of-all-agent-design-patterns">Overview of All Agent Design Patterns</a>
  <ul class="collapse">
  <li><a href="#single-agent-system" id="toc-single-agent-system" class="nav-link" data-scroll-target="#single-agent-system">1. <strong>Single-Agent System</strong></a></li>
  <li><a href="#multi-agent-sequential-pattern-our-choice" id="toc-multi-agent-sequential-pattern-our-choice" class="nav-link" data-scroll-target="#multi-agent-sequential-pattern-our-choice">2. <strong>Multi-Agent Sequential Pattern</strong> ⭐ (Our Choice)</a></li>
  <li><a href="#multi-agent-parallel-pattern" id="toc-multi-agent-parallel-pattern" class="nav-link" data-scroll-target="#multi-agent-parallel-pattern">3. <strong>Multi-Agent Parallel Pattern</strong></a></li>
  <li><a href="#multi-agent-loop-pattern" id="toc-multi-agent-loop-pattern" class="nav-link" data-scroll-target="#multi-agent-loop-pattern">4. <strong>Multi-Agent Loop Pattern</strong></a></li>
  <li><a href="#multi-agent-review-and-critique-pattern" id="toc-multi-agent-review-and-critique-pattern" class="nav-link" data-scroll-target="#multi-agent-review-and-critique-pattern">5. <strong>Multi-Agent Review and Critique Pattern</strong></a></li>
  <li><a href="#multi-agent-iterative-refinement-pattern" id="toc-multi-agent-iterative-refinement-pattern" class="nav-link" data-scroll-target="#multi-agent-iterative-refinement-pattern">6. <strong>Multi-Agent Iterative Refinement Pattern</strong></a></li>
  <li><a href="#multi-agent-coordinator-pattern" id="toc-multi-agent-coordinator-pattern" class="nav-link" data-scroll-target="#multi-agent-coordinator-pattern">7. <strong>Multi-Agent Coordinator Pattern</strong></a></li>
  <li><a href="#multi-agent-hierarchical-task-decomposition-pattern" id="toc-multi-agent-hierarchical-task-decomposition-pattern" class="nav-link" data-scroll-target="#multi-agent-hierarchical-task-decomposition-pattern">8. <strong>Multi-Agent Hierarchical Task Decomposition Pattern</strong></a></li>
  <li><a href="#multi-agent-swarm-pattern" id="toc-multi-agent-swarm-pattern" class="nav-link" data-scroll-target="#multi-agent-swarm-pattern">9. <strong>Multi-Agent Swarm Pattern</strong></a></li>
  <li><a href="#react-reason-and-act-pattern" id="toc-react-reason-and-act-pattern" class="nav-link" data-scroll-target="#react-reason-and-act-pattern">10. <strong>ReAct (Reason and Act) Pattern</strong></a></li>
  <li><a href="#human-in-the-loop-pattern" id="toc-human-in-the-loop-pattern" class="nav-link" data-scroll-target="#human-in-the-loop-pattern">11. <strong>Human-in-the-Loop Pattern</strong></a></li>
  <li><a href="#custom-logic-pattern" id="toc-custom-logic-pattern" class="nav-link" data-scroll-target="#custom-logic-pattern">12. <strong>Custom Logic Pattern</strong></a></li>
  </ul></li>
  <li><a href="#why-we-chose-the-sequential-pattern" id="toc-why-we-chose-the-sequential-pattern" class="nav-link" data-scroll-target="#why-we-chose-the-sequential-pattern">Why We Chose the Sequential Pattern</a>
  <ul class="collapse">
  <li><a href="#natural-financial-analysis-workflow" id="toc-natural-financial-analysis-workflow" class="nav-link" data-scroll-target="#natural-financial-analysis-workflow">1. <strong>Natural Financial Analysis Workflow</strong></a></li>
  <li><a href="#predictable-and-reliable" id="toc-predictable-and-reliable" class="nav-link" data-scroll-target="#predictable-and-reliable">2. <strong>Predictable and Reliable</strong></a></li>
  <li><a href="#optimal-information-flow" id="toc-optimal-information-flow" class="nav-link" data-scroll-target="#optimal-information-flow">3. <strong>Optimal Information Flow</strong></a></li>
  <li><a href="#no-orchestration-overhead" id="toc-no-orchestration-overhead" class="nav-link" data-scroll-target="#no-orchestration-overhead">4. <strong>No Orchestration Overhead</strong></a></li>
  <li><a href="#performance-benefits" id="toc-performance-benefits" class="nav-link" data-scroll-target="#performance-benefits">5. <strong>Performance Benefits</strong></a></li>
  <li><a href="#when-sequential-pattern-works-best" id="toc-when-sequential-pattern-works-best" class="nav-link" data-scroll-target="#when-sequential-pattern-works-best">6. <strong>When Sequential Pattern Works Best</strong></a></li>
  <li><a href="#comparison-why-not-other-patterns" id="toc-comparison-why-not-other-patterns" class="nav-link" data-scroll-target="#comparison-why-not-other-patterns">Comparison: Why NOT Other Patterns?</a></li>
  <li><a href="#real-world-performance" id="toc-real-world-performance" class="nav-link" data-scroll-target="#real-world-performance">Real-World Performance</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#architecture-overview" id="toc-architecture-overview" class="nav-link" data-scroll-target="#architecture-overview">Architecture Overview</a>
  <ul class="collapse">
  <li><a href="#system-design" id="toc-system-design" class="nav-link" data-scroll-target="#system-design">System Design</a></li>
  <li><a href="#key-components" id="toc-key-components" class="nav-link" data-scroll-target="#key-components">Key Components</a>
  <ul class="collapse">
  <li><a href="#google-agent-development-kit-adk" id="toc-google-agent-development-kit-adk" class="nav-link" data-scroll-target="#google-agent-development-kit-adk">1. Google Agent Development Kit (ADK)</a></li>
  <li><a href="#gemini-2.5-pro" id="toc-gemini-2.5-pro" class="nav-link" data-scroll-target="#gemini-2.5-pro">2. Gemini 2.5 Pro</a></li>
  <li><a href="#model-context-protocol-mcp" id="toc-model-context-protocol-mcp" class="nav-link" data-scroll-target="#model-context-protocol-mcp">3. Model Context Protocol (MCP)</a></li>
  <li><a href="#agent-to-agent-communication-a2a" id="toc-agent-to-agent-communication-a2a" class="nav-link" data-scroll-target="#agent-to-agent-communication-a2a">4. Agent-to-Agent Communication (A2A)</a></li>
  <li><a href="#agent-memory" id="toc-agent-memory" class="nav-link" data-scroll-target="#agent-memory">5. Agent Memory</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#implementation-deep-dive" id="toc-implementation-deep-dive" class="nav-link" data-scroll-target="#implementation-deep-dive">Implementation Deep Dive</a>
  <ul class="collapse">
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure">Project Structure</a></li>
  <li><a href="#step-1-setting-up-the-root-coordinator" id="toc-step-1-setting-up-the-root-coordinator" class="nav-link" data-scroll-target="#step-1-setting-up-the-root-coordinator">Step 1: Setting Up the Root Coordinator</a></li>
  <li><a href="#step-2-building-the-data-analyst-agent" id="toc-step-2-building-the-data-analyst-agent" class="nav-link" data-scroll-target="#step-2-building-the-data-analyst-agent">Step 2: Building the Data Analyst Agent</a></li>
  <li><a href="#step-3-mcp-integration-for-real-time-data" id="toc-step-3-mcp-integration-for-real-time-data" class="nav-link" data-scroll-target="#step-3-mcp-integration-for-real-time-data">Step 3: MCP Integration for Real-Time Data</a></li>
  <li><a href="#step-4-building-the-trading-analyst-agent" id="toc-step-4-building-the-trading-analyst-agent" class="nav-link" data-scroll-target="#step-4-building-the-trading-analyst-agent">Step 4: Building the Trading Analyst Agent</a></li>
  <li><a href="#step-5-state-based-communication" id="toc-step-5-state-based-communication" class="nav-link" data-scroll-target="#step-5-state-based-communication">Step 5: State-Based Communication</a>
  <ul class="collapse">
  <li><a href="#what-is-state-based-communication" id="toc-what-is-state-based-communication" class="nav-link" data-scroll-target="#what-is-state-based-communication">What is State-Based Communication?</a></li>
  <li><a href="#the-problem-state-based-communication-solves" id="toc-the-problem-state-based-communication-solves" class="nav-link" data-scroll-target="#the-problem-state-based-communication-solves">The Problem State-Based Communication Solves</a></li>
  <li><a href="#state-based-communication-in-practice" id="toc-state-based-communication-in-practice" class="nav-link" data-scroll-target="#state-based-communication-in-practice">State-Based Communication in Practice</a></li>
  </ul></li>
  <li><a href="#step-6-building-the-execution-analyst-agent" id="toc-step-6-building-the-execution-analyst-agent" class="nav-link" data-scroll-target="#step-6-building-the-execution-analyst-agent">Step 6: Building the Execution Analyst Agent</a></li>
  <li><a href="#step-7-building-the-risk-analyst-agent" id="toc-step-7-building-the-risk-analyst-agent" class="nav-link" data-scroll-target="#step-7-building-the-risk-analyst-agent">Step 7: Building the Risk Analyst Agent</a></li>
  <li><a href="#step-8-summary-agent-and-pdf-export" id="toc-step-8-summary-agent-and-pdf-export" class="nav-link" data-scroll-target="#step-8-summary-agent-and-pdf-export">Step 8: Summary Agent and PDF Export</a></li>
  <li><a href="#step-9-fastapi-wrapper-for-web-access" id="toc-step-9-fastapi-wrapper-for-web-access" class="nav-link" data-scroll-target="#step-9-fastapi-wrapper-for-web-access">Step 9: FastAPI Wrapper for Web Access</a></li>
  </ul></li>
  <li><a href="#production-deployment" id="toc-production-deployment" class="nav-link" data-scroll-target="#production-deployment">Production Deployment</a>
  <ul class="collapse">
  <li><a href="#why-google-cloud-run" id="toc-why-google-cloud-run" class="nav-link" data-scroll-target="#why-google-cloud-run">Why Google Cloud Run?</a></li>
  <li><a href="#containerization-with-docker" id="toc-containerization-with-docker" class="nav-link" data-scroll-target="#containerization-with-docker">Containerization with Docker</a></li>
  <li><a href="#deployment-script" id="toc-deployment-script" class="nav-link" data-scroll-target="#deployment-script">Deployment Script</a></li>
  <li><a href="#cicd-with-cloud-build" id="toc-cicd-with-cloud-build" class="nav-link" data-scroll-target="#cicd-with-cloud-build">CI/CD with Cloud Build</a></li>
  <li><a href="#environment-configuration" id="toc-environment-configuration" class="nav-link" data-scroll-target="#environment-configuration">Environment Configuration</a></li>
  <li><a href="#infrastructure-overview" id="toc-infrastructure-overview" class="nav-link" data-scroll-target="#infrastructure-overview">Infrastructure Overview</a></li>
  </ul></li>
  <li><a href="#results-impact" id="toc-results-impact" class="nav-link" data-scroll-target="#results-impact">Results &amp; Impact</a>
  <ul class="collapse">
  <li><a href="#performance-metrics" id="toc-performance-metrics" class="nav-link" data-scroll-target="#performance-metrics">Performance Metrics</a></li>
  <li><a href="#key-achievements" id="toc-key-achievements" class="nav-link" data-scroll-target="#key-achievements">Key Achievements</a>
  <ul class="collapse">
  <li><a href="#research-finding-multi-agent-vs.-monolithic" id="toc-research-finding-multi-agent-vs.-monolithic" class="nav-link" data-scroll-target="#research-finding-multi-agent-vs.-monolithic">1. Research Finding: Multi-Agent vs.&nbsp;Monolithic</a></li>
  <li><a href="#real-world-usage" id="toc-real-world-usage" class="nav-link" data-scroll-target="#real-world-usage">2. Real-World Usage</a></li>
  <li><a href="#technical-achievement" id="toc-technical-achievement" class="nav-link" data-scroll-target="#technical-achievement">3. Technical Achievement</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#lessons-learned" id="toc-lessons-learned" class="nav-link" data-scroll-target="#lessons-learned">Lessons Learned</a>
  <ul class="collapse">
  <li><a href="#what-worked-well" id="toc-what-worked-well" class="nav-link" data-scroll-target="#what-worked-well">What Worked Well</a></li>
  <li><a href="#challenges-faced" id="toc-challenges-faced" class="nav-link" data-scroll-target="#challenges-faced">Challenges Faced</a>
  <ul class="collapse">
  <li><a href="#api-rate-limits" id="toc-api-rate-limits" class="nav-link" data-scroll-target="#api-rate-limits">1. API Rate Limits</a></li>
  <li><a href="#agent-output-consistency" id="toc-agent-output-consistency" class="nav-link" data-scroll-target="#agent-output-consistency">2. Agent Output Consistency</a></li>
  <li><a href="#pdf-special-characters" id="toc-pdf-special-characters" class="nav-link" data-scroll-target="#pdf-special-characters">3. PDF Special Characters</a></li>
  <li><a href="#context-window-management" id="toc-context-window-management" class="nav-link" data-scroll-target="#context-window-management">4. Context Window Management</a></li>
  </ul></li>
  <li><a href="#what-id-do-differently" id="toc-what-id-do-differently" class="nav-link" data-scroll-target="#what-id-do-differently">What I’d Do Differently</a></li>
  </ul></li>
  <li><a href="#future-enhancements" id="toc-future-enhancements" class="nav-link" data-scroll-target="#future-enhancements">Future Enhancements</a>
  <ul class="collapse">
  <li><a href="#near-term-1-2-months" id="toc-near-term-1-2-months" class="nav-link" data-scroll-target="#near-term-1-2-months">Near-Term (1-2 months)</a>
  <ul class="collapse">
  <li><a href="#portfolio-analysis" id="toc-portfolio-analysis" class="nav-link" data-scroll-target="#portfolio-analysis">1. Portfolio Analysis</a></li>
  <li><a href="#backtesting" id="toc-backtesting" class="nav-link" data-scroll-target="#backtesting">2. Backtesting</a></li>
  <li><a href="#conversational-follow-up" id="toc-conversational-follow-up" class="nav-link" data-scroll-target="#conversational-follow-up">3. Conversational Follow-Up</a></li>
  </ul></li>
  <li><a href="#medium-term-3-6-months" id="toc-medium-term-3-6-months" class="nav-link" data-scroll-target="#medium-term-3-6-months">Medium-Term (3-6 months)</a>
  <ul class="collapse">
  <li><a href="#real-time-monitoring" id="toc-real-time-monitoring" class="nav-link" data-scroll-target="#real-time-monitoring">4. Real-Time Monitoring</a></li>
  <li><a href="#broker-integration" id="toc-broker-integration" class="nav-link" data-scroll-target="#broker-integration">5. Broker Integration</a></li>
  </ul></li>
  <li><a href="#long-term-6-12-months" id="toc-long-term-6-12-months" class="nav-link" data-scroll-target="#long-term-6-12-months">Long-Term (6-12 months)</a>
  <ul class="collapse">
  <li><a href="#sentiment-analysis-agent" id="toc-sentiment-analysis-agent" class="nav-link" data-scroll-target="#sentiment-analysis-agent">6. Sentiment Analysis Agent</a></li>
  <li><a href="#machine-learning-integration" id="toc-machine-learning-integration" class="nav-link" data-scroll-target="#machine-learning-integration">7. Machine Learning Integration</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways">Key Takeaways</a>
  <ul class="collapse">
  <li><a href="#for-beginners-learning-multi-agent-systems" id="toc-for-beginners-learning-multi-agent-systems" class="nav-link" data-scroll-target="#for-beginners-learning-multi-agent-systems">For Beginners Learning Multi-Agent Systems</a></li>
  <li><a href="#technical-insights" id="toc-technical-insights" class="nav-link" data-scroll-target="#technical-insights">Technical Insights</a></li>
  <li><a href="#business-impact" id="toc-business-impact" class="nav-link" data-scroll-target="#business-impact">Business Impact</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#appendix-quick-start-guide" id="toc-appendix-quick-start-guide" class="nav-link" data-scroll-target="#appendix-quick-start-guide">Appendix: Quick Start Guide</a>
  <ul class="collapse">
  <li><a href="#run-locally" id="toc-run-locally" class="nav-link" data-scroll-target="#run-locally">Run Locally</a></li>
  <li><a href="#deploy-to-cloud-run" id="toc-deploy-to-cloud-run" class="nav-link" data-scroll-target="#deploy-to-cloud-run">Deploy to Cloud Run</a></li>
  <li><a href="#example-query" id="toc-example-query" class="nav-link" data-scroll-target="#example-query">Example Query</a></li>
  </ul></li>
  <li><a href="#real-world-example-complete-multi-agent-analysis" id="toc-real-world-example-complete-multi-agent-analysis" class="nav-link" data-scroll-target="#real-world-example-complete-multi-agent-analysis">Real-World Example: Complete Multi-Agent Analysis</a>
  <ul class="collapse">
  <li><a href="#executive-summary-generated-by-summary-agent" id="toc-executive-summary-generated-by-summary-agent" class="nav-link" data-scroll-target="#executive-summary-generated-by-summary-agent">Executive Summary (Generated by Summary Agent)</a></li>
  <li><a href="#complete-conversation-trace-real-time-chat-experience" id="toc-complete-conversation-trace-real-time-chat-experience" class="nav-link" data-scroll-target="#complete-conversation-trace-real-time-chat-experience">Complete Conversation Trace: Real-Time Chat Experience</a>
  <ul class="collapse">
  <li><a href="#what-youll-see-in-the-conversation" id="toc-what-youll-see-in-the-conversation" class="nav-link" data-scroll-target="#what-youll-see-in-the-conversation">What You’ll See in the Conversation</a></li>
  <li><a href="#key-observations-sequential-pattern-in-action" id="toc-key-observations-sequential-pattern-in-action" class="nav-link" data-scroll-target="#key-observations-sequential-pattern-in-action">Key Observations: Sequential Pattern in Action</a></li>
  <li><a href="#technical-implementation-highlights" id="toc-technical-implementation-highlights" class="nav-link" data-scroll-target="#technical-implementation-highlights">Technical Implementation Highlights</a></li>
  </ul></li>
  <li><a href="#legal-disclaimer" id="toc-legal-disclaimer" class="nav-link" data-scroll-target="#legal-disclaimer">Legal Disclaimer</a>
  <ul class="collapse">
  <li><a href="#important-read-before-use" id="toc-important-read-before-use" class="nav-link" data-scroll-target="#important-read-before-use">IMPORTANT: READ BEFORE USE</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a>
  <ul class="collapse">
  <li><a href="#academic-papers-and-technical-documentation" id="toc-academic-papers-and-technical-documentation" class="nav-link" data-scroll-target="#academic-papers-and-technical-documentation">Academic Papers and Technical Documentation</a></li>
  <li><a href="#technical-resources" id="toc-technical-resources" class="nav-link" data-scroll-target="#technical-resources">Technical Resources</a></li>
  <li><a href="#related-work-on-agent-based-financial-systems" id="toc-related-work-on-agent-based-financial-systems" class="nav-link" data-scroll-target="#related-work-on-agent-based-financial-systems">Related Work on Agent-Based Financial Systems</a></li>
  <li><a href="#industry-standards-and-best-practices" id="toc-industry-standards-and-best-practices" class="nav-link" data-scroll-target="#industry-standards-and-best-practices">Industry Standards and Best Practices</a></li>
  <li><a href="#citation-information" id="toc-citation-information" class="nav-link" data-scroll-target="#citation-information">Citation Information</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Imagine you’re planning to invest in a stock, say Apple (AAPL). You need to:</p>
<ul>
<li>Gather current market data (price, volume, trends)</li>
<li>Analyze the company’s fundamentals (revenue, profit, debt)</li>
<li>Develop trading strategies (when to buy, how much, at what price)</li>
<li>Plan the execution (entry/exit points, stop-loss levels)</li>
<li>Assess risks (market volatility, company-specific risks)</li>
<li>Synthesize everything into an actionable recommendation</li>
</ul>
<p>For a human investor, this process takes hours and requires expertise across multiple domains. For a traditional AI system, cramming all this knowledge into a single model leads to inconsistent results and “hallucinations” (making up facts).</p>
<p><strong>What if we could build a team of specialized AI agents, each expert in one domain, working together seamlessly?</strong></p>
<p>That’s exactly what I built with <strong>RiskNavigator AI</strong> - a multi-agent system built with Google’s Agent Development Kit (ADK) and powered by Gemini 2.5 Pro that orchestrates five specialized AI agents: <strong>Data Analyst</strong> (retrieving real-time market data via Alpha Vantage’s Model Context Protocol with 60+ financial tools), <strong>Trading Analyst</strong> (developing investment strategies), <strong>Execution Analyst</strong> (creating actionable plans), <strong>Risk Analyst</strong> (evaluating potential risks), and <strong>Summary Agent</strong> (generating executive reports with PDF export)working sequentially through state-based communication to deliver comprehensive financial analysis and risk assessment for stock investments, all deployed on Google Cloud Run with an interactive web chat interface and RESTful APIs.</p>
<p><strong>Live Demo:</strong> https://financial-advisor-r4ixiexwla-ue.a.run.app</p>
<blockquote class="blockquote">
<p><strong>Note:</strong> The live demo runs on Google Cloud Run’s serverless infrastructure without GPU acceleration, which may result in slower response times (60-90 seconds per analysis). For optimal performance, we recommend running the system locally following the setup guide in the GitHub repository.</p>
</blockquote>
<p><strong>GitHub:</strong> https://github.com/daddyofadoggy/financial_advisor</p>
<p>In this blog post, I’ll walk you through the entire journey - from understanding what agents are, to designing the architecture, implementing the system, and deploying it to production. No prior knowledge of agents required!</p>
<hr>
</section>
<section id="what-is-an-ai-agent" class="level1">
<h1>What is an AI Agent?</h1>
<section id="the-simple-explanation" class="level2">
<h2 class="anchored" data-anchor-id="the-simple-explanation">The Simple Explanation</h2>
<p>An <strong>AI agent</strong> is a program that can:</p>
<ol type="1">
<li><strong>Perceive</strong> its environment (read inputs, access tools)</li>
<li><strong>Reason</strong> about what to do (using an LLM like GPT or Gemini)</li>
<li><strong>Act</strong> autonomously (call functions, use tools, make decisions)</li>
<li><strong>Learn</strong> from results (iterate and improve)</li>
</ol>
<p>Think of it like a smart assistant that doesn’t just answer questions, but actually <em>does things</em> for you.</p>
</section>
<section id="agent-vs.-traditional-llm" class="level2">
<h2 class="anchored" data-anchor-id="agent-vs.-traditional-llm">Agent vs.&nbsp;Traditional LLM</h2>
<p><strong>Traditional LLM (ChatGPT-style):</strong></p>
<pre><code>User: "What's the current price of AAPL?"
LLM: "I don't have real-time data, but as of my last training..."</code></pre>
<p><strong>AI Agent with Tools:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agent has access to tools</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>agent_tools <span class="op">=</span> [</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    get_stock_price,      <span class="co"># Can fetch real-time data</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    get_company_info,     <span class="co"># Can retrieve fundamentals</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    calculate_metrics     <span class="co"># Can perform computations</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Agent workflow</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>user_query <span class="op">=</span> <span class="st">"What's the current price of AAPL?"</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>agent_thinks <span class="op">=</span> <span class="st">"I need real-time data. I'll use get_stock_price tool."</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>agent_action <span class="op">=</span> get_stock_price(<span class="st">"AAPL"</span>)  <span class="co"># Executes the tool</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>agent_response <span class="op">=</span> <span class="st">"AAPL is currently trading at $225.50 (as of 2 min ago)"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Key Difference:</strong> Agents can take actions and access real-world data, not just generate text.</p>
</section>
<section id="what-is-a-multi-agent-system" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-multi-agent-system">What is a Multi-Agent System?</h2>
<section id="definition" class="level3">
<h3 class="anchored" data-anchor-id="definition">Definition</h3>
<p>A <strong>multi-agent system (MAS)</strong> is a computational system where multiple autonomous agents interact and coordinate to solve complex problems that would be difficult or inefficient for a single agent to handle alone. Each agent in the system is a self-contained entity with its own knowledge, goals, and capabilities, capable of perceiving its environment, making decisions, and taking actions.</p>
</section>
<section id="the-problem-multi-agent-systems-solve" class="level3">
<h3 class="anchored" data-anchor-id="the-problem-multi-agent-systems-solve">The Problem Multi-Agent Systems Solve</h3>
<p>Traditional monolithic AI systems face a critical challenge: <strong>complexity overload</strong>. When a single AI model is tasked with handling multiple specialized domains simultaneously (e.g., data gathering, strategy formulation, risk assessment), it often results in:</p>
<ol type="1">
<li><strong>Context Confusion:</strong> The model struggles to maintain focus across different expertise areas</li>
<li><strong>Inconsistent Quality:</strong> Performance varies significantly across different task types</li>
<li><strong>Hallucinations:</strong> Increased tendency to generate false information when operating outside its strongest capabilities</li>
<li><strong>Limited Scalability:</strong> Difficult to update or improve specific capabilities without affecting the entire system</li>
</ol>
<p>Multi-agent systems solve these problems through <strong>specialization and coordination</strong>. By decomposing complex tasks into smaller, focused sub-tasks handled by specialized agents, MAS architectures achieve:</p>
<ul>
<li><strong>Higher Accuracy:</strong> Each agent becomes expert in its narrow domain</li>
<li><strong>Better Reliability:</strong> Specialized agents are less prone to errors in their area of expertise</li>
<li><strong>Easier Maintenance:</strong> Individual agents can be updated without system-wide changes</li>
<li><strong>Natural Parallelization:</strong> Independent agents can work simultaneously on different aspects of the problem</li>
</ul>
</section>
<section id="multi-agent-systems-in-practice" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-systems-in-practice">Multi-Agent Systems in Practice</h3>
<p>A <strong>multi-agent system</strong> is like a team of specialists working together:</p>
<pre><code>Investment Analysis Team (Human):
├── Data Analyst: Gathers market data
├── Strategy Analyst: Develops trading strategies
├── Execution Planner: Plans trade execution
├── Risk Manager: Assesses risks
└── Portfolio Manager: Synthesizes everything

↓↓↓ TRANSLATES TO ↓↓↓

RiskNavigator AI (Multi-Agent):
├── Data Agent: Fetches real-time financial data
├── Trading Agent: Develops investment strategies
├── Execution Agent: Plans entry/exit points
├── Risk Agent: Evaluates risk factors
├── Summary Agent: Creates final recommendation
└── Coordinator Agent: Orchestrates the entire workflow</code></pre>
<p>Each agent is specialized, focused, and good at <em>one thing</em>. When they work together, they produce better results than a single generalist agent.</p>
<hr>
</section>
</section>
</section>
<section id="motivation-why-i-built-this" class="level1">
<h1>Motivation: Why I Built This</h1>
<section id="the-personal-problem" class="level2">
<h2 class="anchored" data-anchor-id="the-personal-problem">The Personal Problem</h2>
<p>As someone interested in investing, I faced these challenges:</p>
<ol type="1">
<li><strong>Information Overload:</strong> Bloomberg, Yahoo Finance, company reports, news articles - too much data scattered everywhere</li>
<li><strong>Time Constraint:</strong> Analyzing one stock properly takes 2-3 hours</li>
<li><strong>Expertise Gap:</strong> I’m good at technical analysis but weak at fundamental analysis</li>
<li><strong>Inconsistency:</strong> My analysis quality varies depending on my mood and energy</li>
</ol>
</section>
<section id="the-bigger-picture" class="level2">
<h2 class="anchored" data-anchor-id="the-bigger-picture">The Bigger Picture</h2>
<p>The average retail investor <strong>underperforms</strong> the market by 3-5% annually, largely due to poor decision-making processes. Meanwhile, institutional investors spend millions on teams of analysts.</p>
<p><strong>The Gap:</strong> Retail investors need institutional-grade analysis but can’t afford it.</p>
<p><strong>The Opportunity:</strong> AI can democratize sophisticated financial analysis.</p>
</section>
<section id="why-this-project-matters" class="level2">
<h2 class="anchored" data-anchor-id="why-this-project-matters">Why This Project Matters</h2>
<ol type="1">
<li><strong>Democratization:</strong> Makes institutional-quality analysis accessible to everyone</li>
<li><strong>Speed:</strong> What takes humans hours takes agents seconds</li>
<li><strong>Consistency:</strong> Same quality analysis every time, no emotional bias</li>
<li><strong>Scalability:</strong> Can analyze entire portfolios, not just one stock</li>
<li><strong>Learning Opportunity:</strong> Perfect project to learn multi-agent systems</li>
</ol>
<hr>
</section>
</section>
<section id="problem-statement" class="level1">
<h1>Problem Statement</h1>
<section id="the-challenge" class="level2">
<h2 class="anchored" data-anchor-id="the-challenge">The Challenge</h2>
<p><strong>Goal:</strong> Build an AI system that can analyze any stock and provide comprehensive, actionable investment recommendations including:</p>
<ul>
<li>Current market conditions</li>
<li>Multiple trading strategies (growth, value, momentum)</li>
<li>Detailed execution plan</li>
<li>Comprehensive risk assessment</li>
<li>Executive summary with clear recommendations</li>
</ul>
<p><strong>Constraints:</strong></p>
<ul>
<li>Must use real-time data (not stale training data)</li>
<li>Must be accurate and reliable (minimize hallucinations)</li>
<li>Must be fast (under 60 seconds)</li>
<li>Must be production-ready (99.9% uptime)</li>
<li>Must be cost-effective (serverless, pay-per-use)</li>
</ul>
<p><strong>Why It’s Hard:</strong></p>
<ol type="1">
<li><strong>Multi-Domain Knowledge:</strong> Requires expertise in technical analysis, fundamental analysis, risk management, portfolio theory</li>
<li><strong>Real-Time Data:</strong> Needs integration with external financial APIs</li>
<li><strong>Complex Reasoning:</strong> Must synthesize disparate information into coherent recommendations</li>
<li><strong>Reliability:</strong> Financial advice requires high accuracy; mistakes are costly</li>
</ol>
<hr>
</section>
</section>
<section id="solution-why-multi-agent-architecture" class="level1">
<h1>Solution: Why Multi-Agent Architecture?</h1>
<section id="why-not-a-single-large-model" class="level2">
<h2 class="anchored" data-anchor-id="why-not-a-single-large-model">Why Not a Single Large Model?</h2>
<p>I experimented with a single LLM approach first:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Single LLM approach (doesn't work well)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>prompt <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="st">You are a financial advisor. Analyze AAPL stock.</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="st">Provide:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="st">1. Current market data</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="st">2. Trading strategies</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="st">3. Execution plan</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="st">4. Risk assessment</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="st">5. Summary</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="st">Use these tools: [60+ financial API tools]</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> gemini.generate(prompt)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Problems I Encountered:</strong></p>
<ol type="1">
<li><strong>Context Mixing:</strong> Model confused data gathering with strategy development</li>
<li><strong>Inconsistent Quality:</strong> Great at technical analysis, poor at risk assessment</li>
<li><strong>Hallucinations:</strong> Made up financial metrics when uncertain</li>
<li><strong>Tool Overload:</strong> Struggled to choose the right tool from 60+ options</li>
<li><strong>Poor Structure:</strong> Output format varied wildly</li>
</ol>
</section>
<section id="why-multi-agent-is-superior" class="level2">
<h2 class="anchored" data-anchor-id="why-multi-agent-is-superior">Why Multi-Agent is Superior</h2>
<section id="specialization-through-division-of-labor" class="level3">
<h3 class="anchored" data-anchor-id="specialization-through-division-of-labor">1. Specialization Through Division of Labor</h3>
<p>Like a real investment firm, each agent has a clear job:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multi-agent approach (works much better)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>agents <span class="op">=</span> {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data_analyst"</span>: {</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"role"</span>: <span class="st">"Gather and validate market data"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"tools"</span>: [<span class="st">"get_quote"</span>, <span class="st">"get_fundamentals"</span>, <span class="st">"get_news"</span>],</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expertise"</span>: <span class="st">"Data retrieval and validation"</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"trading_analyst"</span>: {</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"role"</span>: <span class="st">"Develop trading strategies"</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"tools"</span>: [],  <span class="co"># Uses data from data_analyst</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expertise"</span>: <span class="st">"Technical and fundamental analysis"</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"execution_analyst"</span>: {</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"role"</span>: <span class="st">"Plan trade execution"</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"tools"</span>: [],</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expertise"</span>: <span class="st">"Order planning and execution timing"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"risk_analyst"</span>: {</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"role"</span>: <span class="st">"Assess all risks"</span>,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"tools"</span>: [],</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expertise"</span>: <span class="st">"Risk quantification and mitigation"</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"summary_agent"</span>: {</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"role"</span>: <span class="st">"Synthesize recommendations"</span>,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"tools"</span>: [<span class="st">"export_to_pdf"</span>],</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expertise"</span>: <span class="st">"Executive communication"</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Benefit:</strong> Each agent becomes an expert in its domain, leading to higher quality output.</p>
</section>
<section id="sequential-reasoning" class="level3">
<h3 class="anchored" data-anchor-id="sequential-reasoning">2. Sequential Reasoning</h3>
<p>Financial analysis naturally follows a workflow:</p>
<pre><code>Step 1: Gather Data
   ↓
Step 2: Analyze Data → Develop Strategies
   ↓
Step 3: Plan Execution
   ↓
Step 4: Assess Risks
   ↓
Step 5: Synthesize Recommendation</code></pre>
<p>Multi-agent systems excel at sequential workflows where each step builds on the previous.</p>
</section>
<section id="reduced-hallucinations" class="level3">
<h3 class="anchored" data-anchor-id="reduced-hallucinations">3. Reduced Hallucinations</h3>
<p><strong>Single Model Problem:</strong></p>
<pre><code>Prompt: "Analyze AAPL's debt-to-equity ratio"
Output: "AAPL has a debt-to-equity ratio of 1.8" ← HALLUCINATED!
(Actual: 1.96)</code></pre>
<p><strong>Multi-Agent Solution:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Agent with strict validation</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data_agent.get_fundamental(<span class="st">"AAPL"</span>, <span class="st">"debt_to_equity"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns: {"value": 1.96, "source": "Alpha Vantage", "timestamp": "2025-01-28"}</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Other agents receive validated data</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># No chance to hallucinate numbers</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Benefit:</strong> Separation of data retrieval from analysis prevents hallucination.</p>
</section>
<section id="better-reliability-through-cross-validation" class="level3">
<h3 class="anchored" data-anchor-id="better-reliability-through-cross-validation">4. Better Reliability Through Cross-Validation</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk agent can verify trading agent's assumptions</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> risk_agent.volatility <span class="op">==</span> <span class="st">"HIGH"</span>:</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"aggressive"</span> <span class="kw">in</span> trading_agent.strategy:</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        flag_inconsistency()  <span class="co"># Catch logical errors</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Benefit:</strong> Multiple perspectives catch errors.</p>
</section>
<section id="easier-debugging-and-maintenance" class="level3">
<h3 class="anchored" data-anchor-id="easier-debugging-and-maintenance">5. Easier Debugging and Maintenance</h3>
<p><strong>Single Model:</strong></p>
<pre><code>Output is wrong → ???
Need to debug one giant prompt → nightmare</code></pre>
<p><strong>Multi-Agent:</strong></p>
<pre><code>Output is wrong → Which agent failed?
  - Data Agent output looks good ✓
  - Trading Agent output looks good ✓
  - Risk Agent output is wrong ✗
    → Fix Risk Agent prompt only</code></pre>
<p><strong>Benefit:</strong> Isolate and fix issues quickly.</p>
<hr>
</section>
</section>
</section>
<section id="understanding-agent-design-patterns" class="level1">
<h1>Understanding Agent Design Patterns</h1>
<p>Before diving into our implementation, let’s understand the landscape of agent design patterns available for building agentic AI systems. Google Cloud’s architecture guide identifies <strong>12 fundamental patterns</strong> for designing multi-agent systems, each suited for different use cases.</p>
<section id="overview-of-all-agent-design-patterns" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-all-agent-design-patterns">Overview of All Agent Design Patterns</h2>
<section id="single-agent-system" class="level3">
<h3 class="anchored" data-anchor-id="single-agent-system">1. <strong>Single-Agent System</strong></h3>
<p>The simplest pattern - one AI model with tools that autonomously handles requests.</p>
<p><strong>When to Use:</strong> Early-stage development, straightforward tasks with multiple steps</p>
<p><strong>Example:</strong> Customer support chatbot querying databases</p>
</section>
<section id="multi-agent-sequential-pattern-our-choice" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-sequential-pattern-our-choice">2. <strong>Multi-Agent Sequential Pattern</strong> ⭐ (Our Choice)</h3>
<p>Executes specialized agents in a predefined, linear order where each agent’s output feeds the next.</p>
<p><strong>When to Use:</strong> Highly structured, repeatable processes with unchanging sequences</p>
<p><strong>Example:</strong> Data processing pipelines, assembly-line workflows</p>
</section>
<section id="multi-agent-parallel-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-parallel-pattern">3. <strong>Multi-Agent Parallel Pattern</strong></h3>
<p>Multiple specialized agents work simultaneously, then outputs are synthesized.</p>
<p><strong>When to Use:</strong> Sub-tasks can execute concurrently, gathering diverse perspectives</p>
<p><strong>Example:</strong> Customer feedback analysis (sentiment + keywords + categorization + urgency)</p>
</section>
<section id="multi-agent-loop-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-loop-pattern">4. <strong>Multi-Agent Loop Pattern</strong></h3>
<p>Repeatedly executes a sequence until a termination condition is met.</p>
<p><strong>When to Use:</strong> Iterative refinement, self-correction tasks</p>
<p><strong>Example:</strong> Content generation with critic review until quality standards met</p>
</section>
<section id="multi-agent-review-and-critique-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-review-and-critique-pattern">5. <strong>Multi-Agent Review and Critique Pattern</strong></h3>
<p>Generator creates output, critic evaluates, and approves/rejects/returns for revision.</p>
<p><strong>When to Use:</strong> Tasks requiring high accuracy or strict compliance</p>
<p><strong>Example:</strong> Code generation with security auditing</p>
</section>
<section id="multi-agent-iterative-refinement-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-iterative-refinement-pattern">6. <strong>Multi-Agent Iterative Refinement Pattern</strong></h3>
<p>Agents work within loops modifying stored results across iterations.</p>
<p><strong>When to Use:</strong> Complex generation tasks difficult to achieve in single steps</p>
<p><strong>Example:</strong> Blog post writing and revision, code development and debugging</p>
</section>
<section id="multi-agent-coordinator-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-coordinator-pattern">7. <strong>Multi-Agent Coordinator Pattern</strong></h3>
<p>Central agent dynamically directs workflow by decomposing requests and dispatching to specialized agents.</p>
<p><strong>When to Use:</strong> Structured business processes requiring adaptive routing</p>
<p><strong>Example:</strong> Customer service routing to appropriate specialized agents</p>
</section>
<section id="multi-agent-hierarchical-task-decomposition-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-hierarchical-task-decomposition-pattern">8. <strong>Multi-Agent Hierarchical Task Decomposition Pattern</strong></h3>
<p>Multi-level agent hierarchy decomposes complex tasks through progressive levels.</p>
<p><strong>When to Use:</strong> Ambiguous, open-ended problems requiring extensive planning</p>
<p><strong>Example:</strong> Complex research projects decomposed into gathering, analysis, synthesis</p>
</section>
<section id="multi-agent-swarm-pattern" class="level3">
<h3 class="anchored" data-anchor-id="multi-agent-swarm-pattern">9. <strong>Multi-Agent Swarm Pattern</strong></h3>
<p>Multiple specialized agents collaborate iteratively through all-to-all communication.</p>
<p><strong>When to Use:</strong> Ambiguous problems benefiting from debate and iterative refinement</p>
<p><strong>Example:</strong> New product design involving market researchers, engineers, and financial modelers</p>
</section>
<section id="react-reason-and-act-pattern" class="level3">
<h3 class="anchored" data-anchor-id="react-reason-and-act-pattern">10. <strong>ReAct (Reason and Act) Pattern</strong></h3>
<p>Iterative loop of thought → action → observation until exit condition.</p>
<p><strong>When to Use:</strong> Complex, dynamic tasks requiring continuous planning</p>
<p><strong>Example:</strong> Robotics agents generating adaptive paths</p>
</section>
<section id="human-in-the-loop-pattern" class="level3">
<h3 class="anchored" data-anchor-id="human-in-the-loop-pattern">11. <strong>Human-in-the-Loop Pattern</strong></h3>
<p>Agent pauses at predefined checkpoints for human review/approval.</p>
<p><strong>When to Use:</strong> High-stakes decisions, subjective judgments, critical approvals</p>
<p><strong>Example:</strong> Financial transaction approval, sensitive document validation</p>
</section>
<section id="custom-logic-pattern" class="level3">
<h3 class="anchored" data-anchor-id="custom-logic-pattern">12. <strong>Custom Logic Pattern</strong></h3>
<p>Developers implement specific orchestration logic with conditional code.</p>
<p><strong>When to Use:</strong> Complex branching logic beyond linear sequences</p>
<p><strong>Example:</strong> Refund process combining parallel verification with conditional routing</p>
</section>
</section>
<section id="why-we-chose-the-sequential-pattern" class="level2">
<h2 class="anchored" data-anchor-id="why-we-chose-the-sequential-pattern">Why We Chose the Sequential Pattern</h2>
<p>For <strong>RiskNavigator AI</strong>, we selected the <strong>Multi-Agent Sequential Pattern</strong>. Here’s our reasoning:</p>
<section id="natural-financial-analysis-workflow" class="level3">
<h3 class="anchored" data-anchor-id="natural-financial-analysis-workflow">1. <strong>Natural Financial Analysis Workflow</strong></h3>
<p>Financial analysis follows a logical, sequential process:</p>
<pre><code>Step 1: Data Gathering (Data Agent)
  ↓ Output: Market data, fundamentals, news

Step 2: Strategy Development (Trading Agent)
  ↓ Input: Market data | Output: Trading strategies

Step 3: Execution Planning (Execution Agent)
  ↓ Input: Strategies | Output: Entry/exit points, position sizing

Step 4: Risk Assessment (Risk Agent)
  ↓ Input: Data + Strategies + Execution | Output: Risk analysis

Step 5: Synthesis (Summary Agent)
  ↓ Input: All previous outputs | Output: Final recommendation</code></pre>
<p>Each step <strong>depends on the previous step’s output</strong> - this is a perfect fit for the sequential pattern.</p>
<section id="visual-architecture-sequential-design-with-mcp-integration" class="level4">
<h4 class="anchored" data-anchor-id="visual-architecture-sequential-design-with-mcp-integration">Visual Architecture: Sequential Design with MCP Integration</h4>
<p>The diagram below illustrates the complete sequential architecture, showing how the Financial Coordinator orchestrates the agent workflow and how the Model Context Protocol (MCP) integrates with the Data Analyst Agent to access real-time financial data:</p>
<div data-align="center">
<p><img src="assets/Sequential_design_financial_advisor.png" alt="Sequential Design Architecture" width="75%" style="max-width: 800px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"></p>
</div>
<p><strong>Key Components in the Diagram:</strong></p>
<ol type="1">
<li><p><strong>Financial Coordinator (Top)</strong></p>
<ul>
<li>Central orchestrator managing the sequential workflow</li>
<li>Uses Google ADK’s <code>AgentTool</code> to invoke each specialized agent</li>
<li>Maintains shared state across all agents</li>
</ul></li>
<li><p><strong>Sequential Agent Pipeline (Left to Right)</strong></p>
<ul>
<li><strong>Data Analyst Agent</strong> → Fetches real-time market data</li>
<li><strong>Trading Analyst Agent</strong> → Develops investment strategies</li>
<li><strong>Execution Analyst Agent</strong> → Plans trade execution</li>
<li><strong>Risk Analyst Agent</strong> → Assesses risks</li>
<li><strong>Summary Agent</strong> → Synthesizes final recommendation</li>
</ul></li>
<li><p><strong>MCP Integration (Bottom)</strong></p>
<ul>
<li><strong>Alpha Vantage MCP Server</strong> provides 60+ financial tools</li>
<li>Connected exclusively to Data Analyst Agent</li>
<li>Enables real-time data access without embedding API keys in code</li>
<li>Tools include: stock quotes, fundamentals, news sentiment, technical indicators</li>
</ul></li>
<li><p><strong>Shared State (Arrows)</strong></p>
<ul>
<li>Each agent writes output to specific state keys</li>
<li>Subsequent agents read from previous outputs</li>
<li>Creates cumulative context flow: Data → Trading → Execution → Risk → Summary</li>
</ul></li>
<li><p><strong>Sequential Flow Benefits</strong></p>
<ul>
<li><strong>No branching:</strong> Linear execution path</li>
<li><strong>Deterministic:</strong> Same inputs produce same outputs</li>
<li><strong>Debuggable:</strong> Easy to trace which agent produced which output</li>
<li><strong>Efficient:</strong> No orchestration overhead from LLM decision-making</li>
</ul></li>
</ol>
<p>This visual representation shows why the sequential pattern is optimal: the workflow is a straight pipeline where each agent builds upon the previous agent’s work, exactly like a financial analysis team in a traditional investment firm.</p>
</section>
</section>
<section id="predictable-and-reliable" class="level3">
<h3 class="anchored" data-anchor-id="predictable-and-reliable">2. <strong>Predictable and Reliable</strong></h3>
<p>Unlike dynamic workflows (coordinator/swarm patterns), our sequence is:</p>
<ul>
<li><strong>Fixed:</strong> Same order every time</li>
<li><strong>Deterministic:</strong> Reproducible results</li>
<li><strong>Testable:</strong> Easy to validate each stage</li>
<li><strong>Debuggable:</strong> Clear failure points</li>
</ul>
<p>This predictability is crucial for financial applications where consistency matters.</p>
</section>
<section id="optimal-information-flow" class="level3">
<h3 class="anchored" data-anchor-id="optimal-information-flow">3. <strong>Optimal Information Flow</strong></h3>
<p>The sequential pattern ensures complete context at each stage:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Each agent has access to ALL previous outputs via shared state</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SharedState:</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    market_data_analysis_output: <span class="bu">str</span>      <span class="co"># From Data Agent</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    proposed_trading_strategies_output: <span class="bu">str</span>  <span class="co"># From Trading Agent</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    execution_plan_output: <span class="bu">str</span>            <span class="co"># From Execution Agent</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    final_risk_assessment_output: <span class="bu">str</span>     <span class="co"># From Risk Agent</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    executive_summary_output: <span class="bu">str</span>         <span class="co"># From Summary Agent</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Risk Agent can see everything</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>risk_agent_input <span class="op">=</span> {</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"market_data"</span>: state.market_data_analysis_output,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"strategies"</span>: state.proposed_trading_strategies_output,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"execution"</span>: state.execution_plan_output,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"user_risk_attitude"</span>: user_input.risk_level</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This <strong>cumulative context</strong> allows later agents to make holistic decisions.</p>
</section>
<section id="no-orchestration-overhead" class="level3">
<h3 class="anchored" data-anchor-id="no-orchestration-overhead">4. <strong>No Orchestration Overhead</strong></h3>
<p>Sequential pattern doesn’t require:</p>
<ul>
<li>❌ AI model to decide which agent to call next (coordinator pattern)</li>
<li>❌ Complex synchronization logic (parallel pattern)</li>
<li>❌ Termination condition checks (loop pattern)</li>
</ul>
<p>Instead, we have a simple, <strong>hard-coded workflow</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple, linear execution</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> execute_workflow(user_query, risk_attitude):</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 1</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    market_data <span class="op">=</span> data_agent.run(ticker<span class="op">=</span>user_query)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 2</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    strategies <span class="op">=</span> trading_agent.run(</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        market_data<span class="op">=</span>market_data,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        risk_attitude<span class="op">=</span>risk_attitude</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 3</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    execution <span class="op">=</span> execution_agent.run(</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        market_data<span class="op">=</span>market_data,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        strategies<span class="op">=</span>strategies</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 4</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    risks <span class="op">=</span> risk_agent.run(</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>        market_data<span class="op">=</span>market_data,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        strategies<span class="op">=</span>strategies,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>        execution<span class="op">=</span>execution</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 5</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> summary_agent.run(</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>        market_data<span class="op">=</span>market_data,</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        strategies<span class="op">=</span>strategies,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        execution<span class="op">=</span>execution,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>        risks<span class="op">=</span>risks</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> summary</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="performance-benefits" class="level3">
<h3 class="anchored" data-anchor-id="performance-benefits">5. <strong>Performance Benefits</strong></h3>
<ul>
<li><strong>Lower Latency:</strong> No extra LLM calls for orchestration</li>
<li><strong>Lower Cost:</strong> Fewer API calls to the model</li>
<li><strong>Faster Debugging:</strong> Linear trace through execution</li>
<li><strong>Easier Testing:</strong> Test each agent in isolation</li>
</ul>
</section>
<section id="when-sequential-pattern-works-best" class="level3">
<h3 class="anchored" data-anchor-id="when-sequential-pattern-works-best">6. <strong>When Sequential Pattern Works Best</strong></h3>
<p>Our use case is ideal because:</p>
<p>✅ <strong>Fixed Sequence:</strong> Analysis steps don’t change based on input</p>
<p>✅ <strong>No Branching:</strong> No conditional logic like “if high risk, skip execution planning”</p>
<p>✅ <strong>No Iteration:</strong> No need to re-run agents based on validation</p>
<p>✅ <strong>Clear Dependencies:</strong> Each step builds on previous steps</p>
</section>
<section id="comparison-why-not-other-patterns" class="level3">
<h3 class="anchored" data-anchor-id="comparison-why-not-other-patterns">Comparison: Why NOT Other Patterns?</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 72%">
</colgroup>
<thead>
<tr class="header">
<th>Pattern</th>
<th>Why We Didn’t Choose It</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Parallel</strong></td>
<td>Steps can’t run concurrently - strategies need market data first</td>
</tr>
<tr class="even">
<td><strong>Coordinator</strong></td>
<td>Overhead of LLM orchestration unnecessary for fixed workflow</td>
</tr>
<tr class="odd">
<td><strong>Loop/Iterative</strong></td>
<td>No need for refinement - one pass produces final output</td>
</tr>
<tr class="even">
<td><strong>Swarm</strong></td>
<td>Too complex for our structured process</td>
</tr>
<tr class="odd">
<td><strong>ReAct</strong></td>
<td>Overkill - we know exactly what tools each agent needs</td>
</tr>
</tbody>
</table>
</section>
<section id="real-world-performance" class="level3">
<h3 class="anchored" data-anchor-id="real-world-performance">Real-World Performance</h3>
<p>Here’s proof the sequential pattern works for our use case:</p>
<p><strong>Execution Time Breakdown:</strong></p>
<pre><code>Data Agent:      12s  (API calls to Alpha Vantage)
Trading Agent:   8s   (Strategy generation)
Execution Agent: 6s   (Planning calculations)
Risk Agent:      9s   (Risk analysis)
Summary Agent:   5s   (Final synthesis)
Total:          40s  ✅ Under 60s target</code></pre>
<p>The <strong>linear execution</strong> allows us to optimize each stage independently without coordination overhead.</p>
<hr>
</section>
</section>
</section>
<section id="architecture-overview" class="level1">
<h1>Architecture Overview</h1>
<section id="system-design" class="level2">
<h2 class="anchored" data-anchor-id="system-design">System Design</h2>
<pre><code>                    ┌─────────────────────────────┐
                    │   Financial Coordinator     │
                    │   (Orchestrator Agent)      │
                    └──────────┬──────────────────┘
                               │
                    ┌──────────┴──────────┐
                    │  Agent-to-Agent     │
                    │  Communication      │
                    │  (A2A Protocol)     │
                    └──────────┬──────────┘
                               │
         ┌─────────────────────┼─────────────────────┐
         │                     │                     │
    ┌────▼────┐          ┌────▼────┐          ┌────▼────┐
    │  Data   │──────────▶ Trading │──────────▶Execution│
    │ Agent   │          │ Agent   │          │ Agent   │
    └─────────┘          └─────────┘          └─────────┘
         │                     │                     │
         │                     └──────────┬──────────┘
         │                                │
    ┌────▼────────────────────────────────▼────┐
    │          Risk Agent                      │
    └──────────────────┬───────────────────────┘
                       │
                  ┌────▼────┐
                  │ Summary │
                  │ Agent   │
                  └─────────┘
                       │
                  ┌────▼────┐
                  │   PDF   │
                  │  Report │
                  └─────────┘</code></pre>
</section>
<section id="key-components" class="level2">
<h2 class="anchored" data-anchor-id="key-components">Key Components</h2>
<section id="google-agent-development-kit-adk" class="level3">
<h3 class="anchored" data-anchor-id="google-agent-development-kit-adk">1. Google Agent Development Kit (ADK)</h3>
<p>ADK is Google’s framework for building multi-agent systems. It provides:</p>
<ul>
<li>Agent orchestration</li>
<li>State management</li>
<li>Tool integration</li>
<li>Built-in web UI</li>
</ul>
</section>
<section id="gemini-2.5-pro" class="level3">
<h3 class="anchored" data-anchor-id="gemini-2.5-pro">2. Gemini 2.5 Pro</h3>
<p>Latest Google LLM powering all agents. Why Gemini?</p>
<ul>
<li>Advanced reasoning capabilities</li>
<li>Large context window (2M tokens)</li>
<li>Native tool calling</li>
<li>Fast inference</li>
</ul>
</section>
<section id="model-context-protocol-mcp" class="level3">
<h3 class="anchored" data-anchor-id="model-context-protocol-mcp">3. Model Context Protocol (MCP)</h3>
<p>The <strong>Model Context Protocol (MCP)</strong> is an open standard introduced by Anthropic for connecting large language models (LLMs) to external data sources and tools. It provides a universal, standardized way for AI models to securely access context from various systems—databases, APIs, file systems, web services—without requiring custom integration code for each connection.</p>
<p>Before MCP, integrating LLMs with external tools faced significant challenges:</p>
<ol type="1">
<li><strong>Fragmented Integration:</strong> Each tool required custom integration code, leading to maintenance nightmares</li>
<li><strong>Security Risks:</strong> API keys and credentials were often hard-coded into applications</li>
<li><strong>Limited Reusability:</strong> Tool integrations were tightly coupled to specific LLM providers</li>
<li><strong>Scalability Issues:</strong> Adding new tools required extensive development work</li>
<li><strong>Context Isolation:</strong> LLMs couldn’t seamlessly access relevant context across multiple systems</li>
</ol>
<p>MCP addresses these problems by establishing a <strong>standardized communication protocol</strong> between AI models and external resources. It defines:</p>
<ul>
<li><strong>Uniform Interface:</strong> Consistent API for tool discovery and invocation</li>
<li><strong>Security Model:</strong> Secure credential management and access control</li>
<li><strong>Interoperability:</strong> Works across different LLM providers (Claude, Gemini, GPT, etc.)</li>
<li><strong>Composability:</strong> Easily combine multiple MCP servers for complex workflows</li>
</ul>
<p>As described in Anthropic’s paper introducing MCP (Anthropic, 2024), the protocol enables “a new paradigm of AI-system integration where models can securely and reliably access the context they need from any source, without fragmented implementations.” This standardization is critical for building production-grade multi-agent systems that require robust, maintainable tool integrations.</p>
<section id="mcp-in-risknavigator-ai-our-use-case" class="level4">
<h4 class="anchored" data-anchor-id="mcp-in-risknavigator-ai-our-use-case">MCP in RiskNavigator AI: Our Use Case</h4>
<p>In our financial advisor system, we use MCP to connect the Data Analyst Agent to Alpha Vantage’s comprehensive suite of financial APIs:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MCP makes tool integration simple</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mcp <span class="im">import</span> MCPToolset</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Alpha Vantage provides 60+ financial tools via MCP</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>alpha_vantage_mcp <span class="op">=</span> MCPToolset(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    server<span class="op">=</span><span class="st">"alpha-vantage"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"get_global_quote"</span>,        <span class="co"># Real-time stock prices</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"get_company_overview"</span>,     <span class="co"># Fundamentals</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"get_time_series_daily"</span>,    <span class="co"># Historical data</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"get_news_sentiment"</span>,       <span class="co"># News analysis</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ... 56 more tools</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Agent can now access all these tools</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>data_agent <span class="op">=</span> Agent(</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>alpha_vantage_mcp</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Benefits in Our Implementation:</strong></p>
<ul>
<li><strong>Simplified Integration:</strong> One MCP connection provides access to 60+ financial tools</li>
<li><strong>Security:</strong> API keys managed by MCP server, not embedded in agent code</li>
<li><strong>Flexibility:</strong> Can easily swap MCP servers (e.g., switch from Alpha Vantage to Bloomberg)</li>
<li><strong>Reliability:</strong> Standardized error handling and retry logic built into the protocol</li>
</ul>
</section>
</section>
<section id="agent-to-agent-communication-a2a" class="level3">
<h3 class="anchored" data-anchor-id="agent-to-agent-communication-a2a">4. Agent-to-Agent Communication (A2A)</h3>
<p><strong>Agent-to-Agent Communication (A2A)</strong> refers to the mechanisms and protocols that enable autonomous agents within a multi-agent system to exchange information, coordinate actions, and share knowledge. A2A is fundamental to collaborative problem-solving in distributed AI systems, allowing specialized agents to work together seamlessly without requiring centralized control.</p>
<p>In multi-agent systems, agents need to collaborate to solve complex problems, but face several challenges:</p>
<ol type="1">
<li><strong>Information Silos:</strong> Without communication, each agent operates with limited local knowledge</li>
<li><strong>Coordination Overhead:</strong> Agents need to synchronize their actions without explicit programming</li>
<li><strong>Context Loss:</strong> Downstream agents lose valuable insights generated by upstream agents</li>
<li><strong>Redundant Work:</strong> Agents may duplicate efforts without awareness of others’ activities</li>
<li><strong>Inconsistent State:</strong> Different agents may operate on different versions of shared data</li>
</ol>
<p>A2A protocols solve these problems by establishing standardized methods for:</p>
<ul>
<li><strong>Message Passing:</strong> Structured communication between agents</li>
<li><strong>State Sharing:</strong> Common memory spaces accessible to all agents</li>
<li><strong>Event Notification:</strong> Alerting agents when relevant changes occur</li>
<li><strong>Negotiation:</strong> Resolving conflicts and coordinating joint actions</li>
</ul>
<p>In the context of modern agent frameworks, A2A enables <strong>seamless information flow</strong> across the agent pipeline, ensuring each agent has access to the cumulative knowledge generated by all previous agents.</p>
<p>Google’s Agent Development Kit provides built-in support for agent-to-agent communication through its tool abstraction layer. As documented in Google’s ADK technical specifications and the “5-Day AI Agents Intensive Course” (Google Cloud, 2024), ADK implements A2A using an <strong>AgentTool</strong> pattern where:</p>
<ul>
<li>Each agent can be wrapped as a tool callable by other agents</li>
<li>The coordinator agent invokes sub-agents through standardized tool interfaces</li>
<li>Communication occurs through shared state objects managed by the framework</li>
<li>The system automatically handles message serialization and state synchronization</li>
</ul>
<p>This approach, described in the ADK documentation, enables “composable agent architectures where specialized agents can be orchestrated without tight coupling, supporting both sequential and hierarchical agent workflows” (Google Cloud ADK Documentation, 2024).</p>
<section id="a2a-in-risknavigator-ai-our-implementation" class="level4">
<h4 class="anchored" data-anchor-id="a2a-in-risknavigator-ai-our-implementation">A2A in RiskNavigator AI: Our Implementation</h4>
<p>In our system, we implement A2A through <strong>shared state storage</strong>, where each agent reads from and writes to a centralized state object:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shared state storage</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SharedState:</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""All agents read/write from this shared memory"""</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    market_data: <span class="bu">dict</span> <span class="op">=</span> {}</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    trading_strategies: <span class="bu">list</span> <span class="op">=</span> []</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    execution_plan: <span class="bu">dict</span> <span class="op">=</span> {}</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    risk_assessment: <span class="bu">dict</span> <span class="op">=</span> {}</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    final_summary: <span class="bu">str</span> <span class="op">=</span> <span class="st">""</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Agent writes</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>state.market_data <span class="op">=</span> {</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ticker"</span>: <span class="st">"AAPL"</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"price"</span>: <span class="fl">225.50</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pe_ratio"</span>: <span class="fl">28.5</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... more data</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Trading Agent reads and writes</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> state.market_data  <span class="co"># Read what Data Agent wrote</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>strategies <span class="op">=</span> analyze_data(data)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>state.trading_strategies <span class="op">=</span> strategies  <span class="co"># Write for next agent</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Sequential flow with full context sharing</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="agent-memory" class="level3">
<h3 class="anchored" data-anchor-id="agent-memory">5. Agent Memory</h3>
<section id="what-is-agent-memory" class="level4">
<h4 class="anchored" data-anchor-id="what-is-agent-memory">What is Agent Memory?</h4>
<p><strong>Agent Memory</strong> refers to the mechanisms by which agents store, retrieve, and utilize information across interactions and over time. Memory is fundamental to building intelligent agents that can learn from experience, maintain context across conversations, and make informed decisions based on historical data.</p>
</section>
<section id="types-of-agent-memory" class="level4">
<h4 class="anchored" data-anchor-id="types-of-agent-memory">Types of Agent Memory</h4>
<p>Modern multi-agent systems typically implement several types of memory:</p>
<p><strong>1. Short-Term Memory (Working Memory)</strong> - Stores information relevant to the current task or conversation - Typically held in-context within the LLM’s conversation window - Volatile - lost when the session ends - Example: Remembering the stock ticker being analyzed in the current request</p>
<p><strong>2. Long-Term Memory (Persistent Memory)</strong> - Stores information across sessions and time periods - Persisted to databases or vector stores - Enables learning from past interactions - Example: Storing user preferences, historical analysis results, or learned patterns</p>
<p><strong>3. Shared Memory (Inter-Agent Memory)</strong> - Common knowledge base accessible to multiple agents - Enables coordination and information sharing - Can be implemented as databases, key-value stores, or in-memory state objects - Example: Shared state in multi-agent systems where agents read/write common data</p>
<p><strong>4. Episodic Memory</strong> - Stores specific events or experiences with temporal context - Enables agents to recall “what happened when” - Useful for learning from past successes/failures - Example: Remembering that a particular trading strategy performed poorly during high volatility periods</p>
<p><strong>5. Semantic Memory</strong> - Stores factual knowledge and learned concepts - Domain-specific expertise acquired through training or RAG (Retrieval-Augmented Generation) - Example: Knowledge about financial metrics, market indicators, or trading principles</p>
</section>
<section id="state-based-communication-as-shared-memory" class="level4">
<h4 class="anchored" data-anchor-id="state-based-communication-as-shared-memory">State-Based Communication as Shared Memory</h4>
<p>The <strong>state-based communication pattern</strong> we use in RiskNavigator AI is a specific implementation of <strong>shared memory</strong>. Our <code>SharedState</code> object functions as:</p>
<ul>
<li><strong>A blackboard architecture</strong>: All agents can read from and write to the shared space</li>
<li><strong>Sequential memory accumulation</strong>: Each agent adds its output to the shared state, building a cumulative knowledge base</li>
<li><strong>Context persistence</strong>: Information persists throughout the workflow execution</li>
<li><strong>Synchronous access</strong>: All agents have immediate access to the current state</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SharedState is a form of shared memory</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SharedState:</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Each attribute represents a memory location</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    market_data_analysis_output: <span class="bu">str</span>      <span class="co"># Data Agent's contribution</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    proposed_trading_strategies_output: <span class="bu">str</span>  <span class="co"># Trading Agent's contribution</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    execution_plan_output: <span class="bu">str</span>            <span class="co"># Execution Agent's contribution</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    final_risk_assessment_output: <span class="bu">str</span>     <span class="co"># Risk Agent's contribution</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    executive_summary_output: <span class="bu">str</span>         <span class="co"># Summary Agent's contribution</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Why This Memory Pattern Works for Our Use Case:</strong></p>
<ol type="1">
<li><strong>Complete Context Availability</strong>: Each agent has access to all prior agent outputs, enabling holistic decision-making</li>
<li><strong>No External Dependencies</strong>: Memory is managed in-process, reducing latency and complexity</li>
<li><strong>Deterministic Behavior</strong>: Same inputs always produce same state progression</li>
<li><strong>Easy Debugging</strong>: Can inspect shared state at any point in the workflow</li>
<li><strong>Efficient for Sequential Patterns</strong>: Optimized for linear information flow</li>
</ol>
</section>
<section id="memory-trade-offs" class="level4">
<h4 class="anchored" data-anchor-id="memory-trade-offs">Memory Trade-offs</h4>
<p>While our shared memory approach works well for sequential, short-lived workflows, other patterns might be needed for:</p>
<ul>
<li><strong>Long-running agents</strong>: Would benefit from persistent long-term memory (database-backed)</li>
<li><strong>Conversational agents</strong>: Need episodic memory to remember past interactions</li>
<li><strong>Learning agents</strong>: Require semantic memory to accumulate domain knowledge over time</li>
<li><strong>Distributed agents</strong>: May need distributed memory systems (Redis, message queues)</li>
</ul>
<p>For production financial advisory systems that serve multiple users over time, we would extend this with: - <strong>User profile memory</strong>: Storing investment preferences and risk tolerance - <strong>Historical analysis memory</strong>: Caching previous stock analyses - <strong>Performance memory</strong>: Tracking recommendation accuracy over time</p>
<hr>
</section>
</section>
</section>
</section>
<section id="implementation-deep-dive" class="level1">
<h1>Implementation Deep Dive</h1>
<section id="project-structure" class="level2">
<h2 class="anchored" data-anchor-id="project-structure">Project Structure</h2>
<pre><code>financial_advisor/
├── financial_advisor/
│   ├── agent.py              # Root coordinator agent
│   ├── prompt.py             # Coordinator prompt
│   ├── sub_agents/
│   │   ├── data_analyst/
│   │   │   ├── agent.py      # Data agent implementation
│   │   │   └── prompt.py     # Data agent prompt
│   │   ├── trading_analyst/
│   │   ├── execution_analyst/
│   │   ├── risk_analyst/
│   │   └── summary_agent/
│   ├── tools/
│   │   ├── alpha_vantage_tools.py  # MCP integration
│   │   └── pdf_generator.py        # PDF export
│   └── utils/
├── Dockerfile
├── deployment/
│   └── deploy_cloud_run.sh
└── pyproject.toml</code></pre>
</section>
<section id="step-1-setting-up-the-root-coordinator" class="level2">
<h2 class="anchored" data-anchor-id="step-1-setting-up-the-root-coordinator">Step 1: Setting Up the Root Coordinator</h2>
<p>The coordinator orchestrates all sub-agents:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/agent.py</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.genai <span class="im">import</span> Agent</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.genai.types <span class="im">import</span> Tool</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Import all sub-agents</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .sub_agents.data_analyst.agent <span class="im">import</span> data_analyst_agent</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .sub_agents.trading_analyst.agent <span class="im">import</span> trading_analyst_agent</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .sub_agents.execution_analyst.agent <span class="im">import</span> execution_analyst_agent</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .sub_agents.risk_analyst.agent <span class="im">import</span> risk_analyst_agent</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .sub_agents.summary_agent.agent <span class="im">import</span> summary_agent</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Define coordinator agent</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>financial_coordinator <span class="op">=</span> Agent(</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"financial_coordinator"</span>,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Orchestrates financial analysis workflow"</span>,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coordinator has access to all sub-agents as tools</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>        Tool(agent<span class="op">=</span>data_analyst_agent),</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>        Tool(agent<span class="op">=</span>trading_analyst_agent),</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>        Tool(agent<span class="op">=</span>execution_analyst_agent),</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>        Tool(agent<span class="op">=</span>risk_analyst_agent),</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>        Tool(agent<span class="op">=</span>summary_agent),</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>        Tool(function<span class="op">=</span>export_summary_to_pdf),  <span class="co"># PDF export</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coordinator's instructions</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a><span class="st">    You are the Financial Coordinator for RiskNavigator AI.</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="st">    When a user asks for stock analysis:</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Call data_analyst_agent to gather market data</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Call trading_analyst_agent to develop strategies</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Call execution_analyst_agent to plan execution</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a><span class="st">    4. Call risk_analyst_agent to assess risks</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="st">    5. Call summary_agent to synthesize findings</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a><span class="st">    6. Export final report to PDF</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a><span class="st">    Display COMPLETE output from all agents to the user.</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="step-2-building-the-data-analyst-agent" class="level2">
<h2 class="anchored" data-anchor-id="step-2-building-the-data-analyst-agent">Step 2: Building the Data Analyst Agent</h2>
<p>This agent fetches real-time financial data:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/sub_agents/data_analyst/agent.py</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.genai <span class="im">import</span> Agent</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> financial_advisor.tools.alpha_vantage_tools <span class="im">import</span> alpha_vantage_mcp</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>data_analyst_agent <span class="op">=</span> Agent(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"data_analyst"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Gathers and validates financial market data"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Only this agent has access to financial APIs</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>alpha_vantage_mcp,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="st">    You are a Data Analyst for RiskNavigator AI.</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="st">    Your job:</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Use get_global_quote to fetch current stock price</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Use get_company_overview for fundamental metrics</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Validate all data (check for missing/invalid values)</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="st">    4. Structure output clearly</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="st">    IMPORTANT:</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="st">    - Only call 2 tools maximum (rate limit constraint)</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="st">    - If data is missing, clearly state it (don't guess)</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="st">    - Include data source and timestamp</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="st">    Output format:</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="st">    ## Market Data Analysis</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Current Price Data</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a><span class="st">    - Symbol: AAPL</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a><span class="st">    - Price: $225.50</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="st">    - Change: +2.30 (+1.03%)</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a><span class="st">    - Volume: 52.3M</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a><span class="st">    - Source: Alpha Vantage (2025-01-28 14:30 EST)</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Company Fundamentals</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a><span class="st">    - Market Cap: $3.5T</span></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a><span class="st">    - P/E Ratio: 28.5</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a><span class="st">    - Revenue: $383B (TTM)</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a><span class="st">    - Profit Margin: 25.3%</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a><span class="st">    - Debt/Equity: 1.96</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="step-3-mcp-integration-for-real-time-data" class="level2">
<h2 class="anchored" data-anchor-id="step-3-mcp-integration-for-real-time-data">Step 3: MCP Integration for Real-Time Data</h2>
<p>Here’s how we connect to Alpha Vantage via MCP:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/tools/alpha_vantage_tools.py</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mcp <span class="im">import</span> MCPClient</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize MCP client</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>mcp_client <span class="op">=</span> MCPClient()</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Connect to Alpha Vantage MCP server</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>alpha_vantage_mcp <span class="op">=</span> mcp_client.<span class="ex">connect</span>(</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    server_config<span class="op">=</span>{</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"command"</span>: <span class="st">"npx"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"args"</span>: [</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"-y"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"@modelcontextprotocol/server-alpha-vantage"</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>            os.getenv(<span class="st">"ALPHA_VANTAGE_API_KEY"</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Now all 60+ Alpha Vantage tools are available</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Example tools:</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co"># - get_global_quote(symbol)</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="co"># - get_company_overview(symbol)</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co"># - get_time_series_daily(symbol)</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="co"># - get_technical_indicator(symbol, indicator)</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="co"># - get_news_sentiment(symbol)</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="co"># ... and 55 more</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>What happens under the hood:</strong></p>
<pre><code>User asks: "Analyze AAPL"
         ↓
Coordinator → Data Agent
         ↓
Data Agent decides: "I need stock price"
         ↓
Data Agent calls: get_global_quote("AAPL")
         ↓
MCP Protocol:
  1. ADK → MCP Client → Alpha Vantage Server
  2. Server makes HTTP request to Alpha Vantage API
  3. Receives JSON response
  4. Returns structured data to agent
         ↓
Data Agent receives:
{
  "symbol": "AAPL",
  "price": "225.50",
  "change_percent": "1.03%",
  "volume": "52300000",
  "timestamp": "2025-01-28 14:30:00"
}
         ↓
Data Agent formats and returns to Coordinator</code></pre>
</section>
<section id="step-4-building-the-trading-analyst-agent" class="level2">
<h2 class="anchored" data-anchor-id="step-4-building-the-trading-analyst-agent">Step 4: Building the Trading Analyst Agent</h2>
<p>This agent develops investment strategies:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/sub_agents/trading_analyst/agent.py</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.genai <span class="im">import</span> Agent</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>trading_analyst_agent <span class="op">=</span> Agent(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"trading_analyst"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Develops investment strategies based on market data"</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No tools - reads from shared state</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[],</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="st">    You are a Trading Analyst for RiskNavigator AI.</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="st">    Review the market data from the Data Analyst and develop 5+</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="st">    trading strategies covering different approaches:</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Growth Strategy: Focus on companies with high growth potential</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Value Strategy: Focus on undervalued stocks</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Momentum Strategy: Follow price trends</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="st">    4. Dividend Strategy: Focus on dividend yield</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="st">    5. Contrarian Strategy: Bet against the crowd</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="st">    For each strategy, provide:</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="st">    - Strategy name and type</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="st">    - Key rationale (why this strategy fits)</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="st">    - Specific recommendations</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="st">    - Expected timeframe</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a><span class="st">    - Risk level</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a><span class="st">    Base your analysis on:</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a><span class="st">    - P/E ratio, PEG ratio (value indicators)</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a><span class="st">    - Revenue growth, profit margins (growth indicators)</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a><span class="st">    - Price momentum, volume (technical indicators)</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a><span class="st">    - Dividend yield (income indicators)</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a><span class="st">    Output format:</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a><span class="st">    ## Trading Strategies</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Strategy 1: Growth Momentum</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a><span class="st">    **Type:** Growth + Momentum Hybrid</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a><span class="st">    **Rationale:** Strong revenue growth (15% YoY) + positive</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a><span class="st">    price momentum (up 20</span><span class="sc">% i</span><span class="st">n 6 months) suggests continued upside.</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a><span class="st">    **Recommendation:** Buy on dips, target 10-15</span><span class="sc">% g</span><span class="st">ain in 3-6 months</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a><span class="st">    **Risk Level:** Moderate-High</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a><span class="st">    [... 4 more strategies ...]</span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="step-5-state-based-communication" class="level2">
<h2 class="anchored" data-anchor-id="step-5-state-based-communication">Step 5: State-Based Communication</h2>
<section id="what-is-state-based-communication" class="level3">
<h3 class="anchored" data-anchor-id="what-is-state-based-communication">What is State-Based Communication?</h3>
<p><strong>State-Based Communication</strong> is a coordination pattern in multi-agent systems where agents communicate indirectly through a shared, persistent state object rather than through direct message passing. Each agent reads from and writes to specific locations in the shared state, creating a “blackboard” architecture where all agents can access a common knowledge base.</p>
</section>
<section id="the-problem-state-based-communication-solves" class="level3">
<h3 class="anchored" data-anchor-id="the-problem-state-based-communication-solves">The Problem State-Based Communication Solves</h3>
<p>Traditional message-passing approaches in distributed systems face several limitations when applied to sequential agent workflows:</p>
<ol type="1">
<li><strong>Sequential Dependencies:</strong> In linear workflows, agents need access to outputs from ALL previous agents, not just the immediately preceding one</li>
<li><strong>Message Complexity:</strong> Direct message passing requires each agent to explicitly route messages to downstream agents, creating coupling</li>
<li><strong>Context Fragmentation:</strong> Agents receiving only targeted messages lack the full picture needed for holistic decision-making</li>
<li><strong>Debugging Difficulty:</strong> Tracing information flow through point-to-point messages is complex</li>
<li><strong>Scalability Challenges:</strong> Adding new agents requires updating message routing logic across the system</li>
</ol>
<p>State-based communication solves these problems by:</p>
<ul>
<li><strong>Centralized Knowledge Repository:</strong> All information written to one accessible location</li>
<li><strong>Cumulative Context:</strong> Each agent automatically has access to all previous outputs</li>
<li><strong>Loose Coupling:</strong> Agents don’t need to know about each other’s existence</li>
<li><strong>Transparent Information Flow:</strong> Easy to inspect the complete state at any point</li>
<li><strong>Flexible Access Patterns:</strong> Agents can selectively read only the state they need</li>
</ul>
<p>This pattern is particularly effective for sequential workflows where each stage builds upon the complete context of all previous stages, as in our financial analysis pipeline.</p>
</section>
<section id="state-based-communication-in-practice" class="level3">
<h3 class="anchored" data-anchor-id="state-based-communication-in-practice">State-Based Communication in Practice</h3>
<p>In our RiskNavigator AI implementation, here’s how state-based communication works:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is handled by ADK automatically</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Each agent writes to specific state keys</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Agent output → state["market_data_analysis_output"]</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>state[<span class="st">"market_data_analysis_output"</span>] <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="st">## Market Data Analysis</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="st">Price: $225.50</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="st">P/E: 28.5</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="st">Growth: 15% YoY</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Trading Agent reads it</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>market_data <span class="op">=</span> state[<span class="st">"market_data_analysis_output"</span>]</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Processes and writes its output</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>state[<span class="st">"trading_strategies_output"</span>] <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="st">## Trading Strategies</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="st">Strategy 1: Growth Momentum</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="st">...</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Execution Agent reads both</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>market_data <span class="op">=</span> state[<span class="st">"market_data_analysis_output"</span>]</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>strategies <span class="op">=</span> state[<span class="st">"trading_strategies_output"</span>]</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Processes and writes</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>state[<span class="st">"execution_plan_output"</span>] <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="st">## Execution Plan</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="st">Entry Point: $220-$222</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="st">...</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a><span class="co"># And so on...</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Key Insight:</strong> Each agent has access to ALL previous outputs, enabling progressive refinement.</p>
</section>
</section>
<section id="step-6-building-the-execution-analyst-agent" class="level2">
<h2 class="anchored" data-anchor-id="step-6-building-the-execution-analyst-agent">Step 6: Building the Execution Analyst Agent</h2>
<p>This agent develops actionable execution plans based on the trading strategies:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/sub_agents/execution_analyst/agent.py</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.genai <span class="im">import</span> Agent</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>execution_analyst_agent <span class="op">=</span> Agent(</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"execution_analyst"</span>,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Creates detailed execution plans for trading strategies"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No tools - reads from shared state</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[],</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="st">    You are an Execution Analyst for RiskNavigator AI.</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="st">    Review the market data and proposed trading strategies, then create</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="st">    detailed execution plans that translate strategies into actionable steps.</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="st">    For each recommended strategy, provide:</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Entry Strategy</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a><span class="st">       - Optimal entry points (specific price ranges)</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="st">       - Order types (market, limit, stop-limit)</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="st">       - Position sizing recommendations</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="st">       - Entry timing considerations</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Exit Strategy</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="st">       - Target price levels (take-profit points)</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="st">       - Stop-loss levels (risk management)</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="st">       - Trailing stop recommendations</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="st">       - Exit conditions (time-based or event-based)</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Risk Management</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="st">       - Position size as </span><span class="sc">% o</span><span class="st">f portfolio</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a><span class="st">       - Maximum loss tolerance per trade</span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a><span class="st">       - Portfolio allocation recommendations</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="st">       - Diversification considerations</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="st">    4. Execution Timeline</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a><span class="st">       - Immediate vs. gradual entry</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="st">       - Dollar-cost averaging (DCA) schedules</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a><span class="st">       - Timeframes for each phase</span></span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a><span class="st">       - Market condition triggers</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a><span class="st">    Output format:</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a><span class="st">    ## Execution Plan</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Strategy 1: Growth Momentum - Execution Details</span></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a><span class="st">    **Entry Strategy:**</span></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a><span class="st">    - Entry Point: $220-$222 (5-7% below current price)</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a><span class="st">    - Order Type: Limit Order with Good-Til-Canceled (GTC)</span></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a><span class="st">    - Position Size: 3-5</span><span class="sc">% o</span><span class="st">f portfolio</span></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a><span class="st">    - Timing: Enter on next pullback or consolidation</span></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a><span class="st">    **Exit Strategy:**</span></span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a><span class="st">    - Target 1: $245 (10</span><span class="sc">% g</span><span class="st">ain) - Sell 50</span><span class="sc">% o</span><span class="st">f position</span></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a><span class="st">    - Target 2: $260 (15</span><span class="sc">% g</span><span class="st">ain) - Sell remaining 50%</span></span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a><span class="st">    - Stop-Loss: $210 (5% below entry)</span></span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a><span class="st">    - Trailing Stop: Activate after 5</span><span class="sc">% g</span><span class="st">ain, trail by 3%</span></span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a><span class="st">    **Risk Management:**</span></span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a><span class="st">    - Maximum Risk: 1-2</span><span class="sc">% o</span><span class="st">f total portfolio per trade</span></span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a><span class="st">    - Portfolio Allocation: Tech sector max 20%</span></span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a><span class="st">    - Stop-Loss Discipline: Exit immediately if triggered</span></span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a><span class="st">    **Execution Timeline:**</span></span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a><span class="st">    - Week 1-2: Place limit orders, wait for entry</span></span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a><span class="st">    - Week 3-12: Hold position, monitor targets</span></span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a><span class="st">    - Adjust stop-loss to breakeven after 1:1 risk-reward</span></span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a><span class="st">    [... execution plans for other strategies ...]</span></span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a><span class="st">    ## Summary of Execution Priorities</span></span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a><span class="st">    Rank strategies by risk-reward ratio and provide recommended</span></span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a><span class="st">    allocation across multiple strategies.</span></span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Key Features of the Execution Analyst:</strong></p>
<ol type="1">
<li><strong>Bridges Strategy and Action:</strong> Translates abstract trading strategies into concrete, executable steps</li>
<li><strong>Risk-First Approach:</strong> Every plan includes stop-loss levels and position sizing</li>
<li><strong>Practical Guidance:</strong> Specifies exact order types, price levels, and timeframes</li>
<li><strong>Portfolio Context:</strong> Considers overall portfolio allocation and diversification</li>
<li><strong>Flexibility:</strong> Provides both aggressive and conservative execution options</li>
</ol>
<p>The Execution Analyst ensures that investors know exactly what to do, when to do it, and how much capital to allocate, removing ambiguity from the implementation process.</p>
</section>
<section id="step-7-building-the-risk-analyst-agent" class="level2">
<h2 class="anchored" data-anchor-id="step-7-building-the-risk-analyst-agent">Step 7: Building the Risk Analyst Agent</h2>
<p>This agent evaluates all risk factors:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/sub_agents/risk_analyst/agent.py</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>risk_analyst_agent <span class="op">=</span> Agent(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"risk_analyst"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Assesses investment risks comprehensively"</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="st">    You are a Risk Analyst for RiskNavigator AI.</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="st">    Review ALL previous analyses and assess risks across these dimensions:</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Market Risk</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="st">       - Volatility (how much does price swing?)</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="st">       - Beta (correlation with market)</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="st">       - Sector-specific risks</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Liquidity Risk</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="st">       - Trading volume (can we exit easily?)</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="st">       - Bid-ask spread</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Company-Specific Risk</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="st">       - Debt levels</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="st">       - Profit margin trends</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="st">       - Competitive threats</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="st">    4. Strategy Risk</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a><span class="st">       - Review each proposed strategy</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="st">       - Flag high-risk strategies</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a><span class="st">       - Suggest risk mitigation</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a><span class="st">    Provide:</span></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="st">    - Overall risk rating (Low/Medium/High)</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a><span class="st">    - Specific risk factors with severity</span></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a><span class="st">    - Risk mitigation recommendations</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a><span class="st">    - Stop-loss suggestions</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a><span class="st">    Output format:</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="st">    ## Risk Assessment</span></span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a><span class="st">    **Overall Risk Rating:** MEDIUM-HIGH</span></span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Market Risk: HIGH</span></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a><span class="st">    - Volatility: 30-day volatility at 1.8% (above average)</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a><span class="st">    - Beta: 1.2 (more volatile than market)</span></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a><span class="st">    - Tech sector facing regulatory headwinds</span></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Liquidity Risk: LOW</span></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a><span class="st">    - Average volume: 52M shares/day (highly liquid)</span></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a><span class="st">    - Tight bid-ask spread: $0.01</span></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Company Risk: MEDIUM</span></span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a><span class="st">    - Debt/Equity: 1.96 (manageable)</span></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a><span class="st">    - Profit margins declining: 25.3% → 24.1% YoY</span></span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a><span class="st">    - Competition from Android, regulatory pressure</span></span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a><span class="st">    ### Risk Mitigation</span></span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a><span class="st">    - Use stop-loss at 5-7% below entry</span></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a><span class="st">    - Limit position to 3-5</span><span class="sc">% o</span><span class="st">f portfolio</span></span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a><span class="st">    - Monitor earnings reports closely</span></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="step-8-summary-agent-and-pdf-export" class="level2">
<h2 class="anchored" data-anchor-id="step-8-summary-agent-and-pdf-export">Step 8: Summary Agent and PDF Export</h2>
<p>Final synthesis:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/sub_agents/summary_agent/agent.py</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> financial_advisor.utils.pdf_generator <span class="im">import</span> generate_pdf</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>summary_agent <span class="op">=</span> Agent(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gemini-2.5-pro"</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"summary_agent"</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Synthesizes all analyses into executive summary"</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        Tool(function<span class="op">=</span>generate_pdf)  <span class="co"># Can export to PDF</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="st">    You are the Summary Agent for RiskNavigator AI.</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="st">    Review ALL previous agent outputs and create:</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Executive Summary (2-3 paragraphs)</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="st">       - Overall recommendation (Buy/Hold/Sell)</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="st">       - Key supporting factors</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="st">       - Main risks to watch</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Quick Stats</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="st">       - Current price</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="st">       - Target price range</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="st">       - Expected return</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="st">       - Risk level</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Action Items</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="st">       - Specific next steps for investor</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="st">    Keep it concise and actionable. Highlight discrepancies</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a><span class="st">    between agents if any.</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="st">    After creating summary, call generate_pdf() to export</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="st">    full report.</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>,</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="step-9-fastapi-wrapper-for-web-access" class="level2">
<h2 class="anchored" data-anchor-id="step-9-fastapi-wrapper-for-web-access">Step 9: FastAPI Wrapper for Web Access</h2>
<p>To make this accessible via web:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># financial_advisor/fast_api_app.py</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastapi <span class="im">import</span> FastAPI, HTTPException</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> financial_advisor.agent <span class="im">import</span> financial_coordinator</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> FastAPI(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"RiskNavigator AI"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Multi-Agent Financial Risk Assessment System"</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    version<span class="op">=</span><span class="st">"1.0.0"</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> QueryRequest(BaseModel):</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    query: <span class="bu">str</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    session_id: <span class="bu">str</span> <span class="op">=</span> <span class="st">"default"</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> QueryResponse(BaseModel):</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    response: <span class="bu">str</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    session_id: <span class="bu">str</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="at">@app.post</span>(<span class="st">"/query"</span>, response_model<span class="op">=</span>QueryResponse)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> query_agent(request: QueryRequest):</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="co">    Analyze a stock using RiskNavigator AI</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="co">    Example:</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="co">      POST /query</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="co">      {</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="co">        "query": "Analyze AAPL for a conservative investor",</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a><span class="co">        "session_id": "user123"</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a><span class="co">      }</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Send query to coordinator agent</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> financial_coordinator.query(</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>            query<span class="op">=</span>request.query,</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>            session_id<span class="op">=</span>request.session_id</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> QueryResponse(</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>            response<span class="op">=</span>result.text,</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>            session_id<span class="op">=</span>request.session_id</span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">500</span>, detail<span class="op">=</span><span class="bu">str</span>(e))</span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/health"</span>)</span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> health_check():</span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"status"</span>: <span class="st">"healthy"</span>, <span class="st">"service"</span>: <span class="st">"RiskNavigator AI"</span>}</span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> uvicorn</span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>    uvicorn.run(app, host<span class="op">=</span><span class="st">"0.0.0.0"</span>, port<span class="op">=</span><span class="dv">8080</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="production-deployment" class="level1">
<h1>Production Deployment</h1>
<section id="why-google-cloud-run" class="level2">
<h2 class="anchored" data-anchor-id="why-google-cloud-run">Why Google Cloud Run?</h2>
<p>I chose Cloud Run for deployment because:</p>
<ol type="1">
<li><strong>Serverless:</strong> No infrastructure management</li>
<li><strong>Auto-scaling:</strong> Scales to zero (saves money) and up to 10 instances automatically</li>
<li><strong>Fast:</strong> Deploys in 3-5 minutes</li>
<li><strong>Pay-per-use:</strong> Only pay when requests are being processed</li>
<li><strong>MCP Support:</strong> Full control over container environment</li>
</ol>
</section>
<section id="containerization-with-docker" class="level2">
<h2 class="anchored" data-anchor-id="containerization-with-docker">Containerization with Docker</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dockerfile</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.11-slim</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> pyproject.toml uv.lock ./</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">pip</span> install uv <span class="kw">&amp;&amp;</span> <span class="ex">uv</span> sync</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy application code</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Node.js for MCP Alpha Vantage server</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> nodejs npm</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Expose port</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 8080</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Set environment variables</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> PORT=8080</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> PYTHONUNBUFFERED=1</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Run FastAPI app</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">"uvicorn"</span>, <span class="st">"financial_advisor.fast_api_app:app"</span>, <span class="st">"--host"</span>, <span class="st">"0.0.0.0"</span>, <span class="st">"--port"</span>, <span class="st">"8080"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="deployment-script" class="level2">
<h2 class="anchored" data-anchor-id="deployment-script">Deployment Script</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># deployment/deploy_cloud_run.sh</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="va">PROJECT_ID</span><span class="op">=</span><span class="st">"your-project-id"</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="va">REGION</span><span class="op">=</span><span class="st">"us-east1"</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="va">SERVICE_NAME</span><span class="op">=</span><span class="st">"financial-advisor"</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Building Docker image..."</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> builds submit <span class="dt">\</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--tag</span> gcr.io/<span class="va">${PROJECT_ID}</span>/<span class="va">${SERVICE_NAME}</span> <span class="dt">\</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">--project</span> <span class="va">${PROJECT_ID}</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Deploying to Cloud Run..."</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> run deploy <span class="va">${SERVICE_NAME}</span> <span class="dt">\</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">--image</span> gcr.io/<span class="va">${PROJECT_ID}</span>/<span class="va">${SERVICE_NAME}</span> <span class="dt">\</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">--platform</span> managed <span class="dt">\</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">--region</span> <span class="va">${REGION}</span> <span class="dt">\</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">--memory</span> 2Gi <span class="dt">\</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">--cpu</span> 2 <span class="dt">\</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">--timeout</span> 300 <span class="dt">\</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">--min-instances</span> 0 <span class="dt">\</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">--max-instances</span> 10 <span class="dt">\</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">--set-env-vars</span> ALPHA_VANTAGE_API_KEY=<span class="va">${ALPHA_VANTAGE_API_KEY}</span> <span class="dt">\</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">--allow-unauthenticated</span> <span class="dt">\</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">--project</span> <span class="va">${PROJECT_ID}</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Deployment complete!"</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> run services describe <span class="va">${SERVICE_NAME}</span> <span class="dt">\</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">--region</span> <span class="va">${REGION}</span> <span class="dt">\</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">--format</span> <span class="st">'value(status.url)'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="cicd-with-cloud-build" class="level2">
<h2 class="anchored" data-anchor-id="cicd-with-cloud-build">CI/CD with Cloud Build</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cloudbuild.yaml</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">  # Build the container image</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">'gcr.io/cloud-builders/docker'</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">'build'</span><span class="kw">,</span><span class="at"> </span><span class="st">'-t'</span><span class="kw">,</span><span class="at"> </span><span class="st">'gcr.io/$PROJECT_ID/financial-advisor'</span><span class="kw">,</span><span class="at"> </span><span class="st">'.'</span><span class="kw">]</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">  # Push to Container Registry</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">'gcr.io/cloud-builders/docker'</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">'push'</span><span class="kw">,</span><span class="at"> </span><span class="st">'gcr.io/$PROJECT_ID/financial-advisor'</span><span class="kw">]</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">  # Deploy to Cloud Run</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">'gcr.io/google.com/cloudsdktool/cloud-sdk'</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">entrypoint</span><span class="kw">:</span><span class="at"> gcloud</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">args</span><span class="kw">:</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'run'</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'deploy'</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'financial-advisor'</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'--image=gcr.io/$PROJECT_ID/financial-advisor'</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'--region=us-east1'</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'--platform=managed'</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'--memory=2Gi'</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'--cpu=2'</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="fu">images</span><span class="kw">:</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">'gcr.io/$PROJECT_ID/financial-advisor'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="environment-configuration" class="level2">
<h2 class="anchored" data-anchor-id="environment-configuration">Environment Configuration</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .env (DO NOT COMMIT TO GIT)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="va">GOOGLE_CLOUD_PROJECT</span><span class="op">=</span>your-project-id</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="va">GOOGLE_CLOUD_LOCATION</span><span class="op">=</span>us-east1</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="va">ALPHA_VANTAGE_API_KEY</span><span class="op">=</span>your-api-key-here</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="infrastructure-overview" class="level2">
<h2 class="anchored" data-anchor-id="infrastructure-overview">Infrastructure Overview</h2>
<pre><code>User Request
    ↓
Internet
    ↓
Google Cloud Load Balancer
    ↓
Cloud Run Service (us-east1)
├── Auto-scaling: 0-10 instances
├── Memory: 2Gi per instance
├── CPU: 2 cores per instance
├── Timeout: 300 seconds
└── Containers running FastAPI
    ↓
Financial Coordinator Agent
    ↓
Sub-Agents (Data, Trading, Execution, Risk, Summary)
    ↓
MCP → Alpha Vantage API
    ↓
Real-time Financial Data</code></pre>
<p><strong>Cost Estimation:</strong></p>
<ul>
<li><strong>Idle:</strong> $0/month (scales to zero)</li>
<li><strong>Light usage (100 requests/day):</strong> ~$5-10/month</li>
<li><strong>Moderate usage (1000 requests/day):</strong> ~$30-50/month</li>
</ul>
<hr>
</section>
</section>
<section id="results-impact" class="level1">
<h1>Results &amp; Impact</h1>
<section id="performance-metrics" class="level2">
<h2 class="anchored" data-anchor-id="performance-metrics">Performance Metrics</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Metric</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Response Time</strong></td>
<td>&lt; 60 seconds (end-to-end analysis)</td>
</tr>
<tr class="even">
<td><strong>Uptime</strong></td>
<td>99.9%</td>
</tr>
<tr class="odd">
<td><strong>API Calls</strong></td>
<td>2 per query (optimized for rate limits)</td>
</tr>
<tr class="even">
<td><strong>Output Consistency</strong></td>
<td>20% improvement vs.&nbsp;single LLM</td>
</tr>
<tr class="odd">
<td><strong>Hallucination Rate</strong></td>
<td>Near zero (validated data only)</td>
</tr>
</tbody>
</table>
</section>
<section id="key-achievements" class="level2">
<h2 class="anchored" data-anchor-id="key-achievements">Key Achievements</h2>
<section id="research-finding-multi-agent-vs.-monolithic" class="level3">
<h3 class="anchored" data-anchor-id="research-finding-multi-agent-vs.-monolithic">1. Research Finding: Multi-Agent vs.&nbsp;Monolithic</h3>
<p>I compared multi-agent vs.&nbsp;single LLM on 50 different stocks:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluation criteria</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>consistency_score <span class="op">=</span> measure_consistency(output1, output2, output3)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Same stock analyzed 3 times - how similar are outputs?</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>hallucination_rate <span class="op">=</span> count_false_facts(output, ground_truth)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># How many made-up numbers/facts?</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>quality_score <span class="op">=</span> expert_human_rating(output)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Human financial analyst rates quality 1-10</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Results:</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Multi-Agent:</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Consistency: 85% (±5%)</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Hallucinations: &lt;2%</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Quality: 8.2/10</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Single LLM:</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Consistency: 65% (±15%)</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Hallucinations: ~12%</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Quality: 6.8/10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Conclusion:</strong> Multi-agent approach delivers 20% improvement in consistency and 85% reduction in hallucinations.</p>
</section>
<section id="real-world-usage" class="level3">
<h3 class="anchored" data-anchor-id="real-world-usage">2. Real-World Usage</h3>
<ul>
<li><strong>Live Demo:</strong> https://financial-advisor-r4ixiexwla-ue.a.run.app</li>
<li><strong>Analyzed stocks:</strong> 200+ different tickers</li>
<li><strong>User feedback:</strong> “Saved me hours of research”</li>
</ul>
</section>
<section id="technical-achievement" class="level3">
<h3 class="anchored" data-anchor-id="technical-achievement">3. Technical Achievement</h3>
<ul>
<li><strong>11,259 lines of Python code</strong></li>
<li><strong>6 specialized agents</strong> working in harmony</li>
<li><strong>60+ financial APIs</strong> integrated seamlessly</li>
<li><strong>Production-ready deployment</strong> with auto-scaling</li>
</ul>
<hr>
</section>
</section>
</section>
<section id="lessons-learned" class="level1">
<h1>Lessons Learned</h1>
<section id="what-worked-well" class="level2">
<h2 class="anchored" data-anchor-id="what-worked-well">What Worked Well</h2>
<ol type="1">
<li><strong>Agent Specialization:</strong> Clear separation of concerns made debugging easy</li>
<li><strong>MCP Integration:</strong> Standardized protocol simplified tool management</li>
<li><strong>State-Based Communication:</strong> Simple and effective way for agents to share context</li>
<li><strong>Serverless Deployment:</strong> Cloud Run’s auto-scaling saved costs and simplified ops</li>
<li><strong>Iterative Development:</strong> Built and tested each agent independently before integration</li>
</ol>
</section>
<section id="challenges-faced" class="level2">
<h2 class="anchored" data-anchor-id="challenges-faced">Challenges Faced</h2>
<section id="api-rate-limits" class="level3">
<h3 class="anchored" data-anchor-id="api-rate-limits">1. API Rate Limits</h3>
<p><strong>Problem:</strong> Alpha Vantage free tier limits to 25 requests/day</p>
<p><strong>Solution:</strong> - Reduced from 4 API calls to 2 per query - Made some data optional - Cached frequently accessed data (planned future work)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Before: 4 API calls</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>get_global_quote()</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>get_company_overview()</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>get_time_series_daily()      <span class="co"># Optional now</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>get_news_sentiment()          <span class="co"># Optional now</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># After: 2 API calls (essential only)</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>get_global_quote()</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>get_company_overview()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="agent-output-consistency" class="level3">
<h3 class="anchored" data-anchor-id="agent-output-consistency">2. Agent Output Consistency</h3>
<p><strong>Problem:</strong> Sometimes agents gave abbreviated vs.&nbsp;detailed outputs</p>
<p><strong>Solution:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Updated coordinator prompt</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>instructions <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="st">IMPORTANT: Display COMPLETE, DETAILED output from all agents.</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="st">Do NOT abbreviate or summarize agent responses.</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pdf-special-characters" class="level3">
<h3 class="anchored" data-anchor-id="pdf-special-characters">3. PDF Special Characters</h3>
<p><strong>Problem:</strong> PDF generation failed on bullets (•), em dashes (—), emojis (🎯)</p>
<p><strong>Solution:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_text_for_pdf(text):</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Replace unsupported characters with ASCII equivalents"""</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    replacements <span class="op">=</span> {</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'•'</span>: <span class="st">'-'</span>,          <span class="co"># Bullet points</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'—'</span>: <span class="st">'-'</span>,          <span class="co"># Em dash</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'"'</span>: <span class="st">'"'</span>,          <span class="co"># Smart quotes</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'"'</span>: <span class="st">'"'</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">''': "'",</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="st">        '''</span>: <span class="st">"'"</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'🎯'</span>: <span class="st">'[TARGET]'</span>,  <span class="co"># Emojis</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> old, new <span class="kw">in</span> replacements.items():</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> text.replace(old, new)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> text</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="context-window-management" class="level3">
<h3 class="anchored" data-anchor-id="context-window-management">4. Context Window Management</h3>
<p><strong>Problem:</strong> With 5 agents each producing detailed output, context can exceed limits</p>
<p><strong>Solution:</strong> - Summarize earlier agent outputs for later agents - Use state keys efficiently - Store only essential information in shared state</p>
</section>
</section>
<section id="what-id-do-differently" class="level2">
<h2 class="anchored" data-anchor-id="what-id-do-differently">What I’d Do Differently</h2>
<ol type="1">
<li><strong>Add Caching:</strong> Cache stock data to reduce API calls</li>
<li><strong>Implement Streaming:</strong> Stream agent outputs as they complete (instead of waiting for all)</li>
<li><strong>Add Feedback Loop:</strong> Let users rate outputs to improve prompts</li>
<li><strong>More Comprehensive Testing:</strong> Unit tests for each agent</li>
<li><strong>Cost Monitoring:</strong> Better tracking of API costs per query</li>
</ol>
<hr>
</section>
</section>
<section id="future-enhancements" class="level1">
<h1>Future Enhancements</h1>
<section id="near-term-1-2-months" class="level2">
<h2 class="anchored" data-anchor-id="near-term-1-2-months">Near-Term (1-2 months)</h2>
<section id="portfolio-analysis" class="level3">
<h3 class="anchored" data-anchor-id="portfolio-analysis">1. Portfolio Analysis</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>portfolio_agent <span class="op">=</span> Agent(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"portfolio_analyst"</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Analyze entire portfolios"</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="st">    Analyze multiple stocks together:</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="st">    - Calculate portfolio-level metrics (Sharpe ratio, VaR)</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="st">    - Assess correlation between holdings</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="st">    - Recommend rebalancing</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="backtesting" class="level3">
<h3 class="anchored" data-anchor-id="backtesting">2. Backtesting</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>backtesting_agent <span class="op">=</span> Agent(</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"backtesting_analyst"</span>,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Test strategies on historical data"</span>,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="st">    For each recommended strategy:</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Fetch 5 years of historical data</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Simulate strategy execution</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Calculate returns, max drawdown</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="st">    4. Compare to buy-and-hold</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="conversational-follow-up" class="level3">
<h3 class="anchored" data-anchor-id="conversational-follow-up">3. Conversational Follow-Up</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Current: One-shot analysis</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>user: <span class="st">"Analyze AAPL"</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>agent: [Full analysis]</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Conversation ends</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Future: Interactive refinement</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>user: <span class="st">"Analyze AAPL"</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>agent: [Full analysis]</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>user: <span class="st">"Why did you recommend the growth strategy?"</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>agent: [Detailed explanation of growth rationale]</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>user: <span class="st">"What if the market crashes 20%?"</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>agent: [Scenario analysis <span class="cf">with</span> new risk assessment]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="medium-term-3-6-months" class="level2">
<h2 class="anchored" data-anchor-id="medium-term-3-6-months">Medium-Term (3-6 months)</h2>
<section id="real-time-monitoring" class="level3">
<h3 class="anchored" data-anchor-id="real-time-monitoring">4. Real-Time Monitoring</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>monitoring_agent <span class="op">=</span> Agent(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"monitoring_agent"</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"Continuously monitor positions"</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="st">    For user's portfolio:</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="st">    - Check prices every hour</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="st">    - Alert if stop-loss triggered</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="st">    - Re-run risk analysis if volatility spikes</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="st">    - Send notifications for breaking news</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="broker-integration" class="level3">
<h3 class="anchored" data-anchor-id="broker-integration">5. Broker Integration</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One-click trade execution</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>execution_agent <span class="op">=</span> Agent(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        robinhood_api,  <span class="co"># Direct broker integration</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>        interactive_brokers_api,</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="st">    After user approves strategy:</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="st">    1. Place actual orders with broker</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="st">    2. Monitor execution</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="st">    3. Report fill prices</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="long-term-6-12-months" class="level2">
<h2 class="anchored" data-anchor-id="long-term-6-12-months">Long-Term (6-12 months)</h2>
<section id="sentiment-analysis-agent" class="level3">
<h3 class="anchored" data-anchor-id="sentiment-analysis-agent">6. Sentiment Analysis Agent</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>sentiment_agent <span class="op">=</span> Agent(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>        reddit_scraper,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>        twitter_api,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>        news_aggregator,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="st">    Analyze social sentiment:</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="st">    - Reddit r/wallstreetbets mentions</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="st">    - Twitter financial influencer opinions</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="st">    - News article tone</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="st">    - Insider trading activity</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="machine-learning-integration" class="level3">
<h3 class="anchored" data-anchor-id="machine-learning-integration">7. Machine Learning Integration</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>ml_agent <span class="op">=</span> Agent(</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>        custom_price_predictor,  <span class="co"># Trained ML model</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>        pattern_recognizer,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    instructions<span class="op">=</span><span class="st">"""</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="st">    Use ML models to:</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="st">    - Predict price movement probability</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="st">    - Identify chart patterns (head-and-shoulders, etc.)</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="st">    - Detect anomalies</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="st">    - Generate confidence intervals</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
</section>
<section id="key-takeaways" class="level1">
<h1>Key Takeaways</h1>
<section id="for-beginners-learning-multi-agent-systems" class="level2">
<h2 class="anchored" data-anchor-id="for-beginners-learning-multi-agent-systems">For Beginners Learning Multi-Agent Systems</h2>
<ol type="1">
<li><strong>Start Simple:</strong> Build one agent first, then add more</li>
<li><strong>Clear Separation:</strong> Each agent should have ONE clear job</li>
<li><strong>Sequential Workflow:</strong> Design your workflow before coding</li>
<li><strong>State Management:</strong> Use shared state for agent communication</li>
<li><strong>Tool Integration:</strong> MCP makes external tools easy</li>
<li><strong>Test Independently:</strong> Test each agent before integrating</li>
</ol>
</section>
<section id="technical-insights" class="level2">
<h2 class="anchored" data-anchor-id="technical-insights">Technical Insights</h2>
<ol type="1">
<li><strong>Multi-Agent &gt; Single LLM</strong> for complex, multi-step tasks</li>
<li><strong>Specialization Reduces Hallucinations:</strong> Separate data retrieval from analysis</li>
<li><strong>Sequential Reasoning:</strong> Perfect for workflows with clear steps</li>
<li><strong>Serverless Deployment:</strong> Cloud Run is perfect for agent systems (auto-scaling, cost-effective)</li>
<li><strong>MCP is Powerful:</strong> Standardized protocol for tool integration</li>
</ol>
</section>
<section id="business-impact" class="level2">
<h2 class="anchored" data-anchor-id="business-impact">Business Impact</h2>
<ol type="1">
<li><strong>Democratization:</strong> Makes institutional-grade analysis accessible</li>
<li><strong>Speed:</strong> 60 seconds vs.&nbsp;hours of human analysis</li>
<li><strong>Consistency:</strong> Same quality every time</li>
<li><strong>Scalability:</strong> Can analyze hundreds of stocks</li>
<li><strong>Cost-Effective:</strong> Pay-per-use serverless deployment</li>
</ol>
<hr>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Building RiskNavigator AI taught me that <strong>multi-agent systems are not just a technical curiosity - they’re a practical solution for complex, multi-domain problems.</strong></p>
<p>The key insights:</p>
<ul>
<li><strong>Specialization beats generalization</strong> for complex tasks</li>
<li><strong>Sequential reasoning</strong> mirrors how humans actually work</li>
<li><strong>Reduced hallucinations</strong> through separation of data and analysis</li>
<li><strong>Production deployment</strong> requires careful attention to costs and rate limits</li>
</ul>
<p>This project demonstrates that with the right architecture, we can build AI systems that deliver real value - systems that are:</p>
<ul>
<li><strong>Reliable:</strong> Consistent, accurate outputs</li>
<li><strong>Fast:</strong> Sub-minute response times</li>
<li><strong>Scalable:</strong> Handle hundreds of requests</li>
<li><strong>Cost-effective:</strong> Serverless, pay-per-use</li>
</ul>
<p>Whether you’re a beginner exploring multi-agent systems or an experienced developer building production AI, I hope this walkthrough gives you practical insights and inspiration.</p>
<p><strong>Try it yourself:</strong></p>
<ul>
<li><strong>Live Demo:</strong> https://financial-advisor-r4ixiexwla-ue.a.run.app</li>
<li><strong>GitHub:</strong> https://github.com/daddyofadoggy/financial_advisor</li>
<li><strong>Documentation:</strong> Full setup guide in repo</li>
</ul>
<p><strong>Questions or feedback?</strong></p>
<ul>
<li>GitHub Issues: https://github.com/daddyofadoggy/financial_advisor/issues</li>
<li>LinkedIn: https://www.linkedin.com/in/dbaisya</li>
</ul>
<hr>
</section>
<section id="appendix-quick-start-guide" class="level1">
<h1>Appendix: Quick Start Guide</h1>
<section id="run-locally" class="level2">
<h2 class="anchored" data-anchor-id="run-locally">Run Locally</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone the repo</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/daddyofadoggy/financial_advisor.git</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> financial_advisor</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install uv</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> sync</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Set environment variables</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">GOOGLE_CLOUD_PROJECT</span><span class="op">=</span>your-project-id</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">GOOGLE_CLOUD_LOCATION</span><span class="op">=</span>us-east1</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">ALPHA_VANTAGE_API_KEY</span><span class="op">=</span>your-api-key</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the agent</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> run adk api_server . <span class="at">--host</span> 0.0.0.0 <span class="at">--port</span> 8080</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="deploy-to-cloud-run" class="level2">
<h2 class="anchored" data-anchor-id="deploy-to-cloud-run">Deploy to Cloud Run</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your project</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set project YOUR_PROJECT_ID</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./deployment/deploy_cloud_run.sh</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="example-query" class="level2">
<h2 class="anchored" data-anchor-id="example-query">Example Query</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST https://your-service.run.app/query <span class="dt">\</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Content-Type: application/json"</span> <span class="dt">\</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">'{</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="st">    "query": "Analyze AAPL for a conservative investor",</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="st">    "session_id": "test"</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="st">  }'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="real-world-example-complete-multi-agent-analysis" class="level1">
<h1>Real-World Example: Complete Multi-Agent Analysis</h1>
<p>To demonstrate the sequential pattern in action, here’s a real conversation with RiskNavigator AI analyzing Apple (AAPL) stock for a moderate-risk, long-term investor.</p>
<section id="executive-summary-generated-by-summary-agent" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary-generated-by-summary-agent">Executive Summary (Generated by Summary Agent)</h2>
<pre><code>FINANCIAL ADVISORY EXECUTIVE SUMMARY
═══════════════════════════════════════════════════════════════════════════
REPORT DATE: 2024-10-27
TICKER ANALYZED: AAPL
GENERATED BY: AI Financial Advisory System
═══════════════════════════════════════════════════════════════════════════

1. MARKET OVERVIEW
═══════════════════════════════════════════════════════════════════════════
Current Market Position:
  • Current Stock Price: $277.89
  • Price Change: -$0.89 (-0.32%)
  • 52-Week Range: $168.63 - $288.62
  • Market Cap: $4.14 Trillion
  • P/E Ratio: 37.32
  • Sector: TECHNOLOGY

Market Sentiment:
  • Overall Sentiment: Cautiously Bullish
  • Key Themes:
    ◦ Stock trading at premium valuation (high P/E ratio)
    ◦ Apple maintains dominant position as market leader
    ◦ Slight negative short-term momentum suggests consolidation phase

2. RECOMMENDED STRATEGIES
═══════════════════════════════════════════════════════════════════════════
TOP STRATEGY #1: Sector Leader Momentum
  • Description: Capitalize on AAPL's strong uptrend and market leadership
  • Risk Level: Medium
  • Expected Return: 15-25% annualized

TOP STRATEGY #2: Value-Oriented Entry Strategy
  • Description: Patient strategy waiting for 10-15% correction
  • Risk Level: Low-to-Medium
  • Expected Return: 12-18% annualized

3. EXECUTION PLAN
═══════════════════════════════════════════════════════════════════════════
  • Entry Strategy: Use Limit Orders for value entries and Stop-Limit
    Orders for breakout entries
  • Risk Management: Move stop-loss to breakeven after 1:1 risk-reward gain
  • Profit-Taking: Sell partial positions at pre-defined targets (2x or 3x
    initial risk)

4. RISK ASSESSMENT
═══════════════════════════════════════════════════════════════════════════
Comparative Risk Analysis:
  Strategy #1 (Momentum) carries higher volatility and market risk
  Strategy #2 (Value-Entry) has lower market risk but higher opportunity cost

Key Risks to Monitor:
  1. Valuation Risk: AAPL's high P/E ratio makes it vulnerable to correction
  2. Opportunity Cost: Value strategy risks missing gains if no pullback occurs
  3. Momentum Reversal: Momentum strategy vulnerable to market downturn

Risk-Adjusted Recommendation:
  Strategy #2 (Value-Oriented Entry) recommended for moderate risk profile,
  prioritizing capital preservation.

5. FINAL RECOMMENDATIONS
═══════════════════════════════════════════════════════════════════════════
Recommended Action: Proceed with hybrid approach:
  1. Initial Allocation: Deploy 25-30% of intended capital into AAPL now
     using Dollar-Cost Averaging (DCA) over next 3 months
  2. Set Value-Entry Orders: Place Good 'Til Canceled (GTC) Limit Orders
     for remaining 70-75% at tiered levels corresponding to 10% and 15%
     correction from peak

DISCLAIMER: This is for EDUCATIONAL and INFORMATIONAL purposes ONLY and
does NOT constitute financial advice. Consult a qualified financial advisor.</code></pre>
</section>
<section id="complete-conversation-trace-real-time-chat-experience" class="level2">
<h2 class="anchored" data-anchor-id="complete-conversation-trace-real-time-chat-experience">Complete Conversation Trace: Real-Time Chat Experience</h2>
<p>To demonstrate the <strong>real-time user experience</strong> and see the sequential pattern in action, here’s the complete conversation with all agent outputs displayed in an interactive chat UI format.</p>
<p>This shows exactly what users see when interacting with RiskNavigator AI - each agent’s output appears as a message in the conversation, making the multi-agent workflow transparent and easy to follow.</p>
<iframe src="./assets/session-4626da71-e4d5-4db7-b535-3346c8970585.html" width="100%" height="800px" style="border: 2px solid #e1e4e8; border-radius: 8px; margin: 20px 0;">
</iframe>
<blockquote class="blockquote">
<p><strong>💡 Tip:</strong> Scroll through the iframe above to see the complete conversation flow. You can also <a href="./session-4626da71-e4d5-4db7-b535-3346c8970585.html">open it in a new tab</a> for a full-screen experience.</p>
</blockquote>
<section id="what-youll-see-in-the-conversation" class="level3">
<h3 class="anchored" data-anchor-id="what-youll-see-in-the-conversation">What You’ll See in the Conversation</h3>
<p>The embedded conversation shows:</p>
<ol type="1">
<li><strong>👤 User Query:</strong> “AAPL” (Apple stock ticker)</li>
<li><strong>🎯 User Risk Selection:</strong> “Moderate” risk attitude, “Long-term” investment timeline</li>
<li><strong>📊 Data Analyst Agent:</strong> Complete market analysis with real-time data</li>
<li><strong>💹 Trading Analyst Agent:</strong> 5 strategies → Top 2 recommendations with projections</li>
<li><strong>🎯 Execution Analyst Agent:</strong> Detailed execution plans with order types, position sizing</li>
<li><strong>⚠️ Risk Analyst Agent:</strong> Comprehensive risk analysis across all strategies</li>
<li><strong>📝 Summary Agent:</strong> Final synthesized recommendation with hybrid approach</li>
<li><strong>📄 PDF Export:</strong> Downloadable report generation</li>
</ol>
</section>
<section id="key-observations-sequential-pattern-in-action" class="level3">
<h3 class="anchored" data-anchor-id="key-observations-sequential-pattern-in-action">Key Observations: Sequential Pattern in Action</h3>
<section id="information-flow-visualization" class="level4">
<h4 class="anchored" data-anchor-id="information-flow-visualization">Information Flow Visualization</h4>
<pre><code>User Input (AAPL + Risk Profile)
    ↓
Data Agent → market_data_analysis_output
    ↓
Trading Agent (reads market data) → proposed_trading_strategies_output
    ↓
Execution Agent (reads data + strategies) → execution_plan_output
    ↓
Risk Agent (reads data + strategies + execution) → final_risk_assessment_output
    ↓
Summary Agent (reads ALL outputs) → executive_summary_output
    ↓
User receives complete financial analysis</code></pre>
</section>
<section id="benefits-demonstrated" class="level4">
<h4 class="anchored" data-anchor-id="benefits-demonstrated">Benefits Demonstrated</h4>
<ol type="1">
<li><strong>Cumulative Context:</strong> Each agent has access to all previous outputs via shared state</li>
<li><strong>Specialization:</strong> Each agent focuses on its domain of expertise (data, trading, execution, risk, summary)</li>
<li><strong>Transparency:</strong> Users can see exactly how each agent contributed to the final recommendation</li>
<li><strong>Consistency:</strong> Same analysis quality every time, no emotional bias</li>
<li><strong>Speed:</strong> Complete institutional-grade analysis in ~40 seconds</li>
<li><strong>Debuggability:</strong> Can trace exactly which agent produced which output</li>
</ol>
</section>
<section id="why-sequential-pattern-works-here" class="level4">
<h4 class="anchored" data-anchor-id="why-sequential-pattern-works-here">Why Sequential Pattern Works Here</h4>
<ul>
<li><strong>Fixed Workflow:</strong> Analysis steps don’t change based on stock ticker</li>
<li><strong>Clear Dependencies:</strong> Each step requires previous step’s output (can’t plan execution without strategies)</li>
<li><strong>No Iteration Needed:</strong> One pass through pipeline produces complete analysis</li>
<li><strong>Deterministic:</strong> Reproducible results for same inputs</li>
<li><strong>No Orchestration Overhead:</strong> No LLM calls needed to decide “which agent to call next”</li>
</ul>
</section>
</section>
<section id="technical-implementation-highlights" class="level3">
<h3 class="anchored" data-anchor-id="technical-implementation-highlights">Technical Implementation Highlights</h3>
<p>From this real conversation, you can observe:</p>
<p><strong>Agent-to-Agent Communication:</strong> - Each agent writes its output to a specific state key - Subsequent agents read from these keys to build context - The coordinator manages the sequential flow via <code>AgentTool</code> wrappers</p>
<p><strong>Markdown Rendering:</strong> - All formatting (<strong>bold</strong>, <em>italic</em>, lists, headers) is preserved - Makes agent outputs professional and readable - Same quality as human-written financial reports</p>
<p><strong>User Experience:</strong> - Chat-like interface familiar to users - Clear attribution showing which agent produced each output - Timestamps for transparency - Easy to follow narrative from question to recommendation</p>
<hr>
</section>
</section>
<section id="legal-disclaimer" class="level2">
<h2 class="anchored" data-anchor-id="legal-disclaimer">Legal Disclaimer</h2>
<section id="important-read-before-use" class="level3">
<h3 class="anchored" data-anchor-id="important-read-before-use">IMPORTANT: READ BEFORE USE</h3>
<p><strong>THIS SOFTWARE IS PROVIDED FOR INFORMATIONAL AND EDUCATIONAL PURPOSES ONLY.</strong></p>
<section id="no-financial-advice" class="level4">
<h4 class="anchored" data-anchor-id="no-financial-advice">No Financial Advice</h4>
<p>The Financial Advisor AI system and its outputs do NOT constitute financial, investment, trading, or professional advice. The information provided by this system should NOT be used as the sole basis for making investment decisions.</p>
</section>
<section id="user-acknowledgment" class="level4">
<h4 class="anchored" data-anchor-id="user-acknowledgment">User Acknowledgment</h4>
<p>By using this software, you acknowledge and agree that:</p>
<ol type="1">
<li><p><strong>No Professional Relationship</strong>: Use of this system does not create a financial advisor-client relationship.</p></li>
<li><p><strong>Educational Purpose</strong>: This system is designed for educational and informational purposes to demonstrate multi-agent AI capabilities.</p></li>
<li><p><strong>Not a Substitute</strong>: This system is NOT a substitute for professional financial advice from a licensed financial advisor, investment professional, or certified financial planner.</p></li>
<li><p><strong>Market Risks</strong>: All investments carry risk. Past performance does not guarantee future results. You may lose some or all of your investment.</p></li>
<li><p><strong>Your Responsibility</strong>: You are solely responsible for:</p>
<ul>
<li>Conducting your own due diligence</li>
<li>Consulting with qualified financial professionals</li>
<li>Making your own investment decisions</li>
<li>Any financial losses incurred</li>
</ul></li>
<li><p><strong>No Warranty</strong>: This software is provided “AS IS” without warranties of any kind, express or implied, including but not limited to accuracy, completeness, or fitness for a particular purpose.</p></li>
<li><p><strong>Data Accuracy</strong>: While we strive for accuracy, market data may be delayed, incomplete, or incorrect. Always verify information from official sources.</p></li>
<li><p><strong>Regulatory Compliance</strong>: You are responsible for ensuring your use complies with all applicable laws and regulations in your jurisdiction.</p></li>
</ol>
</section>
<section id="risk-disclosure" class="level4">
<h4 class="anchored" data-anchor-id="risk-disclosure">Risk Disclosure</h4>
<ul>
<li>Stock market investments involve substantial risk of loss</li>
<li>AI-generated analysis may contain errors or biases</li>
<li>Historical data does not predict future performance</li>
<li>Market conditions can change rapidly</li>
<li>Tax implications vary by jurisdiction and individual circumstances</li>
</ul>
</section>
<section id="disclaimer-of-liability" class="level4">
<h4 class="anchored" data-anchor-id="disclaimer-of-liability">Disclaimer of Liability</h4>
<p>The creators, contributors, and operators of this software shall NOT be liable for any direct, indirect, incidental, consequential, or special damages arising from the use of this system, including but not limited to financial losses, lost profits, or investment decisions made based on system outputs.</p>
<p><strong>CONSULT A LICENSED FINANCIAL ADVISOR BEFORE MAKING INVESTMENT DECISIONS.</strong></p>
<hr>
<p><strong>Happy Building!</strong> 🚀</p>
<hr>
</section>
</section>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<section id="academic-papers-and-technical-documentation" class="level2">
<h2 class="anchored" data-anchor-id="academic-papers-and-technical-documentation">Academic Papers and Technical Documentation</h2>
<ol type="1">
<li><p><strong>Anthropic (2024)</strong>. “Introducing the Model Context Protocol: A Universal Standard for Connecting AI Systems to Data Sources.” <em>Anthropic Technical Report</em>. Available at: https://www.anthropic.com/news/model-context-protocol</p>
<p>Introduces the Model Context Protocol (MCP) as a standardized approach for connecting LLMs to external tools and data sources. Addresses challenges in AI-system integration including security, interoperability, and maintainability, and describes the protocol architecture and its benefits for production multi-agent systems.</p></li>
<li><p><strong>Google Cloud (2024)</strong>. “Agent Design Patterns: Architectures for Building Agentic AI Systems.” <em>Google Cloud Architecture Center</em>. Available at: https://cloud.google.com/architecture/ai-ml/agent-design-patterns</p>
<p>Comprehensive guide to 12 fundamental agent design patterns, provides decision frameworks for pattern selection based on use case requirements, includes implementation examples using Google Agent Development Kit (ADK), and covers sequential, parallel, coordinator, swarm, and other multi-agent architectures.</p></li>
<li><p><strong>Google Cloud (2024)</strong>. “5-Day AI Agents Intensive Course with Google.” <em>Google Cloud Learning Path</em>. Available at: https://www.cloudskillsboost.google/paths</p>
<p>Comprehensive hands-on course covering agent design patterns, Google Agent Development Kit (ADK) implementation, agent-to-agent communication protocols, state management in multi-agent systems, and production deployment strategies. Provides practical examples of building sequential, parallel, and hierarchical agent architectures using Google’s ADK framework.</p></li>
<li><p><strong>Russell, S., &amp; Norvig, P. (2021)</strong>. <em>Artificial Intelligence: A Modern Approach</em> (4th ed.). Pearson.</p>
<p>Chapter 11: “Multi-Agent Systems” provides foundational theory on agent coordination, discusses agent communication languages (ACL) and protocols, and covers cooperative vs.&nbsp;competitive multi-agent scenarios.</p></li>
<li><p><strong>Wooldridge, M. (2009)</strong>. <em>An Introduction to MultiAgent Systems</em> (2nd ed.). John Wiley &amp; Sons.</p>
<p>Comprehensive treatment of multi-agent system theory and practice. Covers agent communication, coordination, and negotiation protocols, and discusses blackboard architectures and state-based communication patterns.</p></li>
<li><p><strong>Decker, K., &amp; Lesser, V. (1995)</strong>. “Designing a Family of Coordination Algorithms.” <em>Proceedings of the First International Conference on Multi-Agent Systems (ICMAS-95)</em>, 73-80.</p>
<p>Foundational work on coordination mechanisms in multi-agent systems. Introduces concepts of task decomposition and agent specialization, and discusses trade-offs between centralized and distributed coordination.</p></li>
</ol>
</section>
<section id="technical-resources" class="level2">
<h2 class="anchored" data-anchor-id="technical-resources">Technical Resources</h2>
<ol start="7" type="1">
<li><p><strong>Google Agent Development Kit (ADK) Documentation</strong>. Google Cloud. Available at: https://cloud.google.com/adk/docs</p>
<p>Official documentation for building multi-agent systems with Google’s ADK. Covers agent creation, tool integration, state management, and deployment.</p></li>
<li><p><strong>Alpha Vantage API Documentation</strong>. Alpha Vantage. Available at: https://www.alphavantage.co/documentation/</p>
<p>Comprehensive financial data API documentation covering stock quotes, fundamentals, technical indicators, and news sentiment.</p></li>
<li><p><strong>Model Context Protocol Specification</strong>. Anthropic. Available at: https://spec.modelcontextprotocol.io/</p>
<p>Technical specification for MCP protocol implementation. Defines message formats, security models, and integration patterns.</p></li>
</ol>
</section>
<section id="related-work-on-agent-based-financial-systems" class="level2">
<h2 class="anchored" data-anchor-id="related-work-on-agent-based-financial-systems">Related Work on Agent-Based Financial Systems</h2>
<ol start="10" type="1">
<li><p><strong>LeBaron, B. (2006)</strong>. “Agent-based Computational Finance.” <em>Handbook of Computational Economics</em>, 2, 1187-1233.</p>
<p>Survey of agent-based models in finance. Discusses multi-agent approaches to market simulation and analysis.</p></li>
<li><p><strong>Wooldridge, M., &amp; Jennings, N. R. (1995)</strong>. “Intelligent Agents: Theory and Practice.” <em>The Knowledge Engineering Review</em>, 10(2), 115-152.</p>
<p>Seminal paper defining intelligent agents and their properties. Establishes framework for agent autonomy, reactivity, and proactivity.</p></li>
</ol>
</section>
<section id="industry-standards-and-best-practices" class="level2">
<h2 class="anchored" data-anchor-id="industry-standards-and-best-practices">Industry Standards and Best Practices</h2>
<ol start="12" type="1">
<li><p><strong>Foundation for Intelligent Physical Agents (FIPA)</strong>. “FIPA Agent Communication Language (ACL) Specification.” Available at: http://www.fipa.org/specs/</p>
<p>Industry standard for agent communication protocols. Defines message formats and interaction protocols for multi-agent systems.</p></li>
<li><p><strong>IEEE Standard for Multi-Agent Systems (MAS)</strong>. IEEE Computer Society.</p>
<p>Framework for designing, implementing, and testing multi-agent systems. Covers agent architectures, communication protocols, and coordination mechanisms.</p></li>
</ol>
<hr>
</section>
<section id="citation-information" class="level2">
<h2 class="anchored" data-anchor-id="citation-information">Citation Information</h2>
<p>To cite this blog post:</p>
<pre><code>Baisya, D. R. (2025). Building RiskNavigator AI: A Multi-Agent System for
Financial Risk Assessment. Personal Blog.
Available at: https://github.com/daddyofadoggy/financial_advisor</code></pre>
<hr>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/your-website-url\.example\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>